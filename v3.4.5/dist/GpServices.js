/*!
 * @brief Geoportal resources access library
 *
 * This software is released under the licence CeCILL-B (Free BSD compatible)
 * @see http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt
 * @see http://www.cecill.info/licences/Licence_CeCILL-B_V1-fr.txt
 * @see http://www.cecill.info/
 *
 * copyright CeCILL-B
 * copyright IGN
 * @author IGN
 * @version 3.4.5
 * @date 19/12/2024
 *
 */
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.4
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("node-fetch")):"function"==typeof define&&define.amd?define("Gp",["require"],t):"object"==typeof exports?exports.Gp=t(require("node-fetch")):e.Gp=t(e[void 0])}(this,(function(e){return function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(e,t,r){"use strict";function o(e,t){return void 0===t&&(t=Object),t&&"function"==typeof t.getOwnPropertyDescriptors&&(e=t.create(null,t.getOwnPropertyDescriptors(e))),t&&"function"==typeof t.freeze?t.freeze(e):e}function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var i=o({allowfullscreen:!0,async:!0,autofocus:!0,autoplay:!0,checked:!0,controls:!0,default:!0,defer:!0,disabled:!0,formnovalidate:!0,hidden:!0,ismap:!0,itemscope:!0,loop:!0,multiple:!0,muted:!0,nomodule:!0,novalidate:!0,open:!0,playsinline:!0,readonly:!0,required:!0,reversed:!0,selected:!0});var s=o({area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});var a=o({script:!1,style:!1,textarea:!0,title:!0});function c(e){return e===l.HTML}var l=o({HTML:"text/html",XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),u=Object.keys(l).map((function(e){return l[e]}));var p=o({HTML:"http://www.w3.org/1999/xhtml",SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.assign=function(e,t){if(null===e||"object"!=typeof e)throw new TypeError("target is not an object");for(var r in t)n(t,r)&&(e[r]=t[r]);return e},t.find=function(e,t,r){if(void 0===r&&(r=Array.prototype),e&&"function"==typeof r.find)return r.find.call(e,t);for(var o=0;o<e.length;o++)if(n(e,o)){var i=e[o];if(t.call(void 0,i,o,e))return i}},t.freeze=o,t.HTML_BOOLEAN_ATTRIBUTES=i,t.HTML_RAW_TEXT_ELEMENTS=a,t.HTML_VOID_ELEMENTS=s,t.hasDefaultHTMLNamespace=function(e){return c(e)||e===l.XML_XHTML_APPLICATION},t.hasOwn=n,t.isHTMLBooleanAttribute=function(e){return n(i,e.toLowerCase())},t.isHTMLRawTextElement=function(e){var t=e.toLowerCase();return n(a,t)&&!a[t]},t.isHTMLEscapableRawTextElement=function(e){var t=e.toLowerCase();return n(a,t)&&a[t]},t.isHTMLMimeType=c,t.isHTMLVoidElement=function(e){return n(s,e.toLowerCase())},t.isValidMimeType=function(e){return u.indexOf(e)>-1},t.MIME_TYPE=l,t.NAMESPACE=p},function(e){e.exports=JSON.parse('{"name":"geoportal-access-lib","version":"3.4.5","date":"19/12/2024","description":"French Geoportal resources access library","module":"src/Gp.js","main":"dist/GpServices-src.js","homepage":"https://github.com/IGNF/geoportal-access-lib#readme","scripts":{"clean":"echo \\"Warning: no yet implemented!\\" && exit 0","setup":"npm install","cover":"nyc --reporter=lcov --reporter=text npm run test","eslint":"eslint src/","build":"webpack --mode=none","build:prod":"webpack --mode=production","build:dev":"webpack --mode=development","test":"npx instant-mocha --mode=development --reporter mochawesome --reporter-options reportDir=test-report,reportFilename=index --webpack-config ./test/webpack/webpack.test.js --glob \\"test_*.js\\" test/spec/","test:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.js","test:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.docker.js","test:end-to-end:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.js","test:end-to-end:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.docker.js","sample":"npm run sample:serve","sample:serve":"webpack-dev-server --mode=none --open-page samples/index-src.html --https --content-base . --output-public-path \'/dist/\' --port 9001 --open","sample:serve:prod":"webpack-dev-server --mode=production --open-page samples/index-prod.html --content-base . --output-public-path \'/dist/\' --port 9001 --open","sample:serve:dev":"webpack-dev-server --mode=development --open-page samples/index-map.html --content-base . --output-public-path \'/dist/\' --port 9001 --open","doc":"npm run doc:serve","doc:serve":"webpack-dev-server --content-base jsdoc --port 9001 --open"},"engines":{"node":">=20"},"nyc":{"include":["src/**/*.js"],"instrument":false,"sourceMap":false},"repository":{"type":"git","url":"https://github.com/IGNF/geoportal-access-lib.git"},"keywords":["geoplateforme","geoportail","webservice","javascript","es6"],"author":"IGNF","license":"CECILL-B","dependencies":{"@xmldom/xmldom":"^0.9.6","es6-promise":"^4.2.4","node-fetch":"^3.3.2"},"devDependencies":{"@babel/core":"^7.12.10","@babel/plugin-transform-template-literals":"^7.12.1","@babel/preset-env":"^7.12.11","babel-loader":"^8.2.2","chai":"^4.1.2","clean-webpack-plugin":"^4.0.0","copy-webpack-plugin":"^5.1.2","eslint":"^7.18.0","eslint-config-standard":"^16.0.2","eslint-loader":"^4.0.2","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^5.0.0","glob":"^7.1.2","handlebars-layouts":"^3.1.4","handlebars-webpack-plugin":"^1.4.1","html-webpack-plugin":"^4.5.2","instant-mocha":"^1.5.3","istanbul-instrumenter-loader":"^3.0.1","jsdoc-webpack-plugin":"^0.3.0","loglevel":"^1.6.1","mocha":"^8.4.0","mocha-loader":"^5.1.5","mochawesome":"^6.2.1","nyc":"^15.1.0","path":"^0.12.7","replace-bundle-webpack-plugin":"^1.0.0","sinon":"^9.2.4","sinon-es6":"0.0.3","speed-measure-webpack-plugin":"^1.4.2","string-template":"^1.0.0","terser-webpack-plugin":"^4.2.3","webpack":"^4.47.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-node-externals":"^2.5.2","webpack-shell-plugin":"^0.5.0"},"bundleDependencies":[]}')},function(e,t,r){"use strict";function o(e,t){e.prototype=Object.create(Error.prototype,{constructor:{value:e},name:{value:e.name,enumerable:!0,writable:t}})}var n=r(0).freeze({Error:"Error",IndexSizeError:"IndexSizeError",DomstringSizeError:"DomstringSizeError",HierarchyRequestError:"HierarchyRequestError",WrongDocumentError:"WrongDocumentError",InvalidCharacterError:"InvalidCharacterError",NoDataAllowedError:"NoDataAllowedError",NoModificationAllowedError:"NoModificationAllowedError",NotFoundError:"NotFoundError",NotSupportedError:"NotSupportedError",InUseAttributeError:"InUseAttributeError",InvalidStateError:"InvalidStateError",SyntaxError:"SyntaxError",InvalidModificationError:"InvalidModificationError",NamespaceError:"NamespaceError",InvalidAccessError:"InvalidAccessError",ValidationError:"ValidationError",TypeMismatchError:"TypeMismatchError",SecurityError:"SecurityError",NetworkError:"NetworkError",AbortError:"AbortError",URLMismatchError:"URLMismatchError",QuotaExceededError:"QuotaExceededError",TimeoutError:"TimeoutError",InvalidNodeTypeError:"InvalidNodeTypeError",DataCloneError:"DataCloneError",EncodingError:"EncodingError",NotReadableError:"NotReadableError",UnknownError:"UnknownError",ConstraintError:"ConstraintError",DataError:"DataError",TransactionInactiveError:"TransactionInactiveError",ReadOnlyError:"ReadOnlyError",VersionError:"VersionError",OperationError:"OperationError",NotAllowedError:"NotAllowedError",OptOutError:"OptOutError"}),i=Object.keys(n);function s(e){return"number"==typeof e&&e>=1&&e<=25}function a(e,t){var r;s(e)?(this.name=i[e],this.message=t||""):(this.message=e,this.name="string"==typeof(r=t)&&r.substring(r.length-n.Error.length)===n.Error?t:n.Error),Error.captureStackTrace&&Error.captureStackTrace(this,a)}o(a,!0),Object.defineProperties(a.prototype,{code:{enumerable:!0,get:function(){var e=i.indexOf(this.name);return s(e)?e:0}}});for(var c={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25},l=Object.entries(c),u=0;u<l.length;u++){a[l[u][0]]=l[u][1]}function p(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,p)}o(p),t.DOMException=a,t.DOMExceptionName=n,t.ExceptionCode=c,t.ParseError=p},function(e,t,r){var o,n;!function(){"use strict";o=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"],n={},i=null;function s(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(o){return"debug"===o&&(o="log"),typeof console!==t&&("trace"===o&&r?a:void 0!==console[o]?s(console,o):void 0!==console.log?s(console,"log"):e)}function l(){for(var r=this.getLevel(),n=0;n<o.length;n++){var i=o[n];this[i]=n<r?e:this.methodFactory(i,r,this.name)}if(this.log=this.debug,typeof console===t&&r<this.levels.SILENT)return"No console available for logging"}function u(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function p(e,t,r){return c(e)||u.apply(this,arguments)}function h(e,r){var s,a,c,u=this,h="loglevel";function f(e){var r=(o[e]||"silent").toUpperCase();if(typeof window!==t&&h){try{return void(window.localStorage[h]=r)}catch(e){}try{window.document.cookie=encodeURIComponent(h)+"="+r+";"}catch(e){}}}function d(){var e;if(typeof window!==t&&h){try{e=window.localStorage[h]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,o=encodeURIComponent(h),n=r.indexOf(o+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n+o.length+1))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}}function g(){if(typeof window!==t&&h){try{window.localStorage.removeItem(h)}catch(e){}try{window.document.cookie=encodeURIComponent(h)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}function m(e){var t=e;if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=u.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?h+=":"+e:"symbol"==typeof e&&(h=void 0),u.name=e,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=r||p,u.getLevel=function(){return null!=c?c:null!=a?a:s},u.setLevel=function(e,t){return c=m(e),!1!==t&&f(c),l.call(u)},u.setDefaultLevel=function(e){a=m(e),d()||u.setLevel(e,!1)},u.resetLevel=function(){c=null,g(),l.call(u)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)},u.rebuild=function(){if(i!==u&&(s=m(i.getLevel())),l.call(u),i===u)for(var e in n)n[e].rebuild()},s=m(i?i.getLevel():"WARN");var E=d();null!=E&&(c=m(E)),l.call(u)}(i=new h).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=n[e];return t||(t=n[e]=new h(e,i.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=f),i},i.getLoggers=function(){return n},i.default=i,i},void 0===(n="function"==typeof o?o.call(t,r,t,e):o)||(e.exports=n)}()},function(t,r){t.exports=e},function(e,t,r){"use strict";var o=r(0);t.assign=o.assign,t.hasDefaultHTMLNamespace=o.hasDefaultHTMLNamespace,t.isHTMLMimeType=o.isHTMLMimeType,t.isValidMimeType=o.isValidMimeType,t.MIME_TYPE=o.MIME_TYPE,t.NAMESPACE=o.NAMESPACE;var n=r(2);t.DOMException=n.DOMException,t.DOMExceptionName=n.DOMExceptionName,t.ExceptionCode=n.ExceptionCode,t.ParseError=n.ParseError;var i=r(6);t.Attr=i.Attr,t.CDATASection=i.CDATASection,t.CharacterData=i.CharacterData,t.Comment=i.Comment,t.Document=i.Document,t.DocumentFragment=i.DocumentFragment,t.DocumentType=i.DocumentType,t.DOMImplementation=i.DOMImplementation,t.Element=i.Element,t.Entity=i.Entity,t.EntityReference=i.EntityReference,t.LiveNodeList=i.LiveNodeList,t.NamedNodeMap=i.NamedNodeMap,t.Node=i.Node,t.NodeList=i.NodeList,t.Notation=i.Notation,t.ProcessingInstruction=i.ProcessingInstruction,t.Text=i.Text,t.XMLSerializer=i.XMLSerializer;var s=r(12);t.DOMParser=s.DOMParser,t.onErrorStopParsing=s.onErrorStopParsing,t.onWarningStopParsing=s.onWarningStopParsing},function(e,t,r){"use strict";var o=r(0),n=o.find,i=o.hasDefaultHTMLNamespace,s=o.hasOwn,a=o.isHTMLMimeType,c=o.isHTMLRawTextElement,l=o.isHTMLVoidElement,u=o.MIME_TYPE,p=o.NAMESPACE,h=Symbol(),f=r(2),d=f.DOMException,g=f.DOMExceptionName,m=r(7);function E(e){if(e!==h)throw new TypeError("Illegal constructor")}function y(e){return""!==e}function v(e,t){return s(e,t)||(e[t]=!0),e}function w(e){if(!e)return[];var t=function(e){return e?e.split(/[\t\n\f\r ]+/).filter(y):[]}(e);return Object.keys(t.reduce(v,{}))}function b(e){if(!m.QName_exact.test(e))throw new d(d.INVALID_CHARACTER_ERR,'invalid character in qualified name "'+e+'"')}function S(e,t){b(t),e=e||null;var r=null,n=t;if(t.indexOf(":")>=0){var i=t.split(":");r=i[0],n=i[1]}if(null!==r&&null===e)throw new d(d.NAMESPACE_ERR,"prefix is non-null and namespace is null");if("xml"===r&&e!==o.NAMESPACE.XML)throw new d(d.NAMESPACE_ERR,'prefix is "xml" and namespace is not the XML namespace');if(("xmlns"===r||"xmlns"===t)&&e!==o.NAMESPACE.XMLNS)throw new d(d.NAMESPACE_ERR,'either qualifiedName or prefix is "xmlns" and namespace is not the XMLNS namespace');if(e===o.NAMESPACE.XMLNS&&"xmlns"!==r&&"xmlns"!==t)throw new d(d.NAMESPACE_ERR,'namespace is the XMLNS namespace and neither qualifiedName nor prefix is "xmlns"');return[e,r,n]}function T(e,t){for(var r in e)s(e,r)&&(t[r]=e[r])}function R(e,t){var r=e.prototype;if(!(r instanceof t)){function o(){}o.prototype=t.prototype,T(r,o=new o),e.prototype=r=o}r.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),r.constructor=e)}var N={},_=N.ELEMENT_NODE=1,O=N.ATTRIBUTE_NODE=2,A=N.TEXT_NODE=3,x=N.CDATA_SECTION_NODE=4,C=N.ENTITY_REFERENCE_NODE=5,I=N.ENTITY_NODE=6,M=N.PROCESSING_INSTRUCTION_NODE=7,D=N.COMMENT_NODE=8,P=N.DOCUMENT_NODE=9,L=N.DOCUMENT_TYPE_NODE=10,k=N.DOCUMENT_FRAGMENT_NODE=11,q=N.NOTATION_NODE=12,U=o.freeze({DOCUMENT_POSITION_DISCONNECTED:1,DOCUMENT_POSITION_PRECEDING:2,DOCUMENT_POSITION_FOLLOWING:4,DOCUMENT_POSITION_CONTAINS:8,DOCUMENT_POSITION_CONTAINED_BY:16,DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC:32});function F(e){for(var t=[];e.parentNode||e.ownerElement;)e=e.parentNode||e.ownerElement,t.unshift(e);return t}function V(e,t){if(t.length<e.length)return V(t,e);var r=null;for(var o in e){if(e[o]!==t[o])return r;r=e[o]}return r}function G(e){return e.guid||(e.guid=Math.random()),e.guid}function j(){}function H(e,t){this._node=e,this._refresh=t,Y(this)}function Y(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!==t){var r=e._refresh(e._node);if(Ie(e,"length",r.length),!e.$$length||r.length<e.$$length)for(var o=r.length;o in e;o++)s(e,o)&&delete e[o];T(r,e),e._inc=t}}function X(){}function z(e,t){for(var r=0;r<e.length;){if(e[r]===t)return r;r++}}function B(e,t,r,o){if(o?t[z(t,o)]=r:(t[t.length]=r,t.length++),e){r.ownerElement=e;var n=e.ownerDocument;n&&(o&&ee(n,e,o),function(e,t,r){e&&e._inc++;var o=r.namespaceURI;o===p.XMLNS&&(t._nsMap[r.prefix?r.localName:""]=r.value)}(n,e,r))}}function W(e,t,r){var o=z(t,r);if(o>=0){for(var n=t.length-1;o<=n;)t[o]=t[++o];if(t.length=n,e){var i=e.ownerDocument;i&&ee(i,e,r),r.ownerElement=null}}}function J(){}function Q(e){E(e)}function K(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function Z(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(Z(e,t))return!0}while(e=e.nextSibling)}function $(e,t){E(e);var r=t||{};this.ownerDocument=this,this.contentType=r.contentType||u.XML_APPLICATION,this.type=a(this.contentType)?"html":"xml"}function ee(e,t,r,o){e&&e._inc++,r.namespaceURI===p.XMLNS&&delete t._nsMap[r.prefix?r.localName:""]}function te(e,t,r){if(e&&e._inc){e._inc++;var o=t.childNodes;if(r&&!r.nextSibling)o[o.length++]=r;else{for(var n=t.firstChild,i=0;n;)o[i++]=n,n=n.nextSibling;o.length=i,delete o[o.length]}}}function re(e,t){if(e!==t.parentNode)throw new d(d.NOT_FOUND_ERR,"child's parent is not parent");var r=t.previousSibling,o=t.nextSibling;return r?r.nextSibling=o:e.firstChild=o,o?o.previousSibling=r:e.lastChild=r,te(e.ownerDocument,e),t.parentNode=null,t.previousSibling=null,t.nextSibling=null,t}function oe(e){return e&&e.nodeType===Q.DOCUMENT_TYPE_NODE}function ne(e){return e&&e.nodeType===Q.ELEMENT_NODE}function ie(e){return e&&e.nodeType===Q.TEXT_NODE}function se(e,t){var r=e.childNodes||[];if(n(r,ne)||oe(t))return!1;var o=n(r,oe);return!(t&&o&&r.indexOf(o)>r.indexOf(t))}function ae(e,t){var r=e.childNodes||[];if(n(r,(function(e){return ne(e)&&e!==t})))return!1;var o=n(r,oe);return!(t&&o&&r.indexOf(o)>r.indexOf(t))}function ce(e,t,r){if(!function(e){return e&&(e.nodeType===Q.DOCUMENT_NODE||e.nodeType===Q.DOCUMENT_FRAGMENT_NODE||e.nodeType===Q.ELEMENT_NODE)}(e))throw new d(d.HIERARCHY_REQUEST_ERR,"Unexpected parent node type "+e.nodeType);if(r&&r.parentNode!==e)throw new d(d.NOT_FOUND_ERR,"child not in parent");if(!function(e){return e&&(e.nodeType===Q.CDATA_SECTION_NODE||e.nodeType===Q.COMMENT_NODE||e.nodeType===Q.DOCUMENT_FRAGMENT_NODE||e.nodeType===Q.DOCUMENT_TYPE_NODE||e.nodeType===Q.ELEMENT_NODE||e.nodeType===Q.PROCESSING_INSTRUCTION_NODE||e.nodeType===Q.TEXT_NODE)}(t)||oe(t)&&e.nodeType!==Q.DOCUMENT_NODE)throw new d(d.HIERARCHY_REQUEST_ERR,"Unexpected node type "+t.nodeType+" for parent node type "+e.nodeType)}function le(e,t,r){var o=e.childNodes||[],i=t.childNodes||[];if(t.nodeType===Q.DOCUMENT_FRAGMENT_NODE){var s=i.filter(ne);if(s.length>1||n(i,ie))throw new d(d.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(1===s.length&&!se(e,r))throw new d(d.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(ne(t)&&!se(e,r))throw new d(d.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(oe(t)){if(n(o,oe))throw new d(d.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var a=n(o,ne);if(r&&o.indexOf(a)<o.indexOf(r))throw new d(d.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element");if(!r&&a)throw new d(d.HIERARCHY_REQUEST_ERR,"Doctype can not be appended since element is present")}}function ue(e,t,r){var o=e.childNodes||[],i=t.childNodes||[];if(t.nodeType===Q.DOCUMENT_FRAGMENT_NODE){var s=i.filter(ne);if(s.length>1||n(i,ie))throw new d(d.HIERARCHY_REQUEST_ERR,"More than one element or text in fragment");if(1===s.length&&!ae(e,r))throw new d(d.HIERARCHY_REQUEST_ERR,"Element in fragment can not be inserted before doctype")}if(ne(t)&&!ae(e,r))throw new d(d.HIERARCHY_REQUEST_ERR,"Only one element can be added and only after doctype");if(oe(t)){function c(e){return oe(e)&&e!==r}if(n(o,c))throw new d(d.HIERARCHY_REQUEST_ERR,"Only one doctype is allowed");var a=n(o,ne);if(r&&o.indexOf(a)<o.indexOf(r))throw new d(d.HIERARCHY_REQUEST_ERR,"Doctype can only be inserted before an element")}}function pe(e,t,r,o){ce(e,t,r),e.nodeType===Q.DOCUMENT_NODE&&(o||le)(e,t,r);var n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===k){var i=t.firstChild;if(null==i)return t;var s=t.lastChild}else i=s=t;var a=r?r.previousSibling:e.lastChild;i.previousSibling=a,s.nextSibling=r,a?a.nextSibling=i:e.firstChild=i,null==r?e.lastChild=s:r.previousSibling=s;do{i.parentNode=e}while(i!==s&&(i=i.nextSibling));return te(e.ownerDocument||e,e,t),t.nodeType==k&&(t.firstChild=t.lastChild=null),t}function he(e){E(e),this._nsMap=Object.create(null)}function fe(e){E(e),this.namespaceURI=null,this.prefix=null,this.ownerElement=null}function de(e){E(e)}function ge(e){E(e)}function me(e){E(e)}function Ee(e){E(e)}function ye(e){E(e)}function ve(e){E(e)}function we(e){E(e)}function be(e){E(e)}function Se(e){E(e)}function Te(e){E(e)}function Re(){}function Ne(e){var t=[],r=this.nodeType===P&&this.documentElement||this,o=r.prefix,n=r.namespaceURI;if(n&&null==o&&null==(o=r.lookupPrefix(n)))var i=[{namespace:n,prefix:null}];return Ae(this,t,e,i),t.join("")}function _e(e,t,r){var o=e.prefix||"",n=e.namespaceURI;if(!n)return!1;if("xml"===o&&n===p.XML||n===p.XMLNS)return!1;for(var i=r.length;i--;){var s=r[i];if(s.prefix===o)return s.namespace!==n}return!0}function Oe(e,t,r){e.push(" ",t,'="',r.replace(/[<>&"\t\n\r]/g,K),'"')}function Ae(e,t,r,o){o||(o=[]);var n="html"===(e.nodeType===P?e:e.ownerDocument).type;if(r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case _:var i=e.attributes,s=i.length,a=e.firstChild,u=e.tagName,h=u;if(!n&&!e.prefix&&e.namespaceURI){for(var f,d=0;d<i.length;d++)if("xmlns"===i.item(d).name){f=i.item(d).value;break}if(!f)for(var g=o.length-1;g>=0;g--){if(""===(E=o[g]).prefix&&E.namespace===e.namespaceURI){f=E.namespace;break}}if(f!==e.namespaceURI)for(g=o.length-1;g>=0;g--){var E;if((E=o[g]).namespace===e.namespaceURI){E.prefix&&(h=E.prefix+":"+u);break}}}t.push("<",h);for(var y=0;y<s;y++){"xmlns"==(v=i.item(y)).prefix?o.push({prefix:v.localName,namespace:v.value}):"xmlns"==v.nodeName&&o.push({prefix:"",namespace:v.value})}for(y=0;y<s;y++){var v,w,b;if(_e(v=i.item(y),0,o))Oe(t,(w=v.prefix||"")?"xmlns:"+w:"xmlns",b=v.namespaceURI),o.push({prefix:w,namespace:b});Ae(v,t,r,o)}if(u===h&&_e(e,0,o))Oe(t,(w=e.prefix||"")?"xmlns:"+w:"xmlns",b=e.namespaceURI),o.push({prefix:w,namespace:b});var S=!a;if(S&&(n||e.namespaceURI===p.HTML)&&(S=l(u)),S)t.push("/>");else{if(t.push(">"),n&&c(u))for(;a;)a.data?t.push(a.data):Ae(a,t,r,o.slice()),a=a.nextSibling;else for(;a;)Ae(a,t,r,o.slice()),a=a.nextSibling;t.push("</",h,">")}return;case P:case k:for(a=e.firstChild;a;)Ae(a,t,r,o.slice()),a=a.nextSibling;return;case O:return Oe(t,e.name,e.value);case A:return t.push(e.data.replace(/[<&>]/g,K));case x:return t.push(m.CDATA_START,e.data,m.CDATA_END);case D:return t.push(m.COMMENT_START,e.data,m.COMMENT_END);case L:var T=e.publicId,R=e.systemId;return t.push(m.DOCTYPE_DECL_START," ",e.name),T?(t.push(" ",m.PUBLIC," ",T),R&&"."!==R&&t.push(" ",R)):R&&"."!==R&&t.push(" ",m.SYSTEM," ",R),e.internalSubset&&t.push(" [",e.internalSubset,"]"),void t.push(">");case M:return t.push("<?",e.target," ",e.data,"?>");case C:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function xe(e,t,r){var o;switch(t.nodeType){case _:(o=t.cloneNode(!1)).ownerDocument=e;case k:break;case O:r=!0}if(o||(o=t.cloneNode(!1)),o.ownerDocument=e,o.parentNode=null,r)for(var n=t.firstChild;n;)o.appendChild(xe(e,n,r)),n=n.nextSibling;return o}function Ce(e,t,r){var o=new t.constructor(h);for(var n in t)if(s(t,n)){var i=t[n];"object"!=typeof i&&i!=o[n]&&(o[n]=i)}switch(t.childNodes&&(o.childNodes=new j),o.ownerDocument=e,o.nodeType){case _:var a=t.attributes,c=o.attributes=new X,l=a.length;c._ownerElement=o;for(var u=0;u<l;u++)o.setAttributeNode(Ce(e,a.item(u),!0));break;case O:r=!0}if(r)for(var p=t.firstChild;p;)o.appendChild(Ce(e,p,r)),p=p.nextSibling;return o}function Ie(e,t,r){e[t]=r}j.prototype={length:0,item:function(e){return e>=0&&e<this.length?this[e]:null},toString:function(e){for(var t=[],r=0;r<this.length;r++)Ae(this[r],t,e);return t.join("")},filter:function(e){return Array.prototype.filter.call(this,e)},indexOf:function(e){return Array.prototype.indexOf.call(this,e)}},j.prototype[Symbol.iterator]=function(){var e=this,t=0;return{next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0}},return:function(){return{done:!0}}}},H.prototype.item=function(e){return Y(this),this[e]||null},R(H,j),X.prototype={length:0,item:j.prototype.item,getNamedItem:function(e){this._ownerElement&&this._ownerElement._isInHTMLDocumentAndNamespace()&&(e=e.toLowerCase());for(var t=0;t<this.length;){var r=this[t];if(r.nodeName===e)return r;t++}return null},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!==this._ownerElement)throw new d(d.INUSE_ATTRIBUTE_ERR);var r=this.getNamedItemNS(e.namespaceURI,e.localName);return r===e?e:(B(this._ownerElement,this,e,r),r)},setNamedItemNS:function(e){return this.setNamedItem(e)},removeNamedItem:function(e){var t=this.getNamedItem(e);if(!t)throw new d(d.NOT_FOUND_ERR,e);return W(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);if(!r)throw new d(d.NOT_FOUND_ERR,e?e+" : "+t:t);return W(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){e||(e=null);for(var r=0;r<this.length;){var o=this[r];if(o.localName===t&&o.namespaceURI===e)return o;r++}return null}},X.prototype[Symbol.iterator]=function(){var e=this,t=0;return{next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0}},return:function(){return{done:!0}}}},J.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,r){var o=u.XML_APPLICATION;e===p.HTML?o=u.XML_XHTML_APPLICATION:e===p.SVG&&(o=u.XML_SVG_IMAGE);var n=new $(h,{contentType:o});if(n.implementation=this,n.childNodes=new j,n.doctype=r||null,r&&n.appendChild(r),t){var i=n.createElementNS(e,t);n.appendChild(i)}return n},createDocumentType:function(e,t,r,o){b(e);var n=new ye(h);return n.name=e,n.nodeName=e,n.publicId=t||"",n.systemId=r||"",n.internalSubset=o||"",n.childNodes=new j,n},createHTMLDocument:function(e){var t=new $(h,{contentType:u.HTML});if(t.implementation=this,t.childNodes=new j,!1!==e){t.doctype=this.createDocumentType("html"),t.doctype.ownerDocument=t,t.appendChild(t.doctype);var r=t.createElement("html");t.appendChild(r);var o=t.createElement("head");if(r.appendChild(o),"string"==typeof e){var n=t.createElement("title");n.appendChild(t.createTextNode(e)),o.appendChild(n)}r.appendChild(t.createElement("body"))}return t}},Q.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,parentNode:null,get parentElement(){return this.parentNode&&this.parentNode.nodeType===this.ELEMENT_NODE?this.parentNode:null},childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,baseURI:"about:blank",get isConnected(){var e=this.getRootNode();return e&&e.nodeType===e.DOCUMENT_NODE},contains:function(e){if(!e)return!1;var t=e;do{if(this===t)return!0;t=e.parentNode}while(t);return!1},getRootNode:function(e){var t=this;do{if(!t.parentNode)return t;t=t.parentNode}while(t)},isEqualNode:function(e){if(!e)return!1;if(this.nodeType!==e.nodeType)return!1;switch(this.nodeType){case this.DOCUMENT_TYPE_NODE:if(this.name!==e.name)return!1;if(this.publicId!==e.publicId)return!1;if(this.systemId!==e.systemId)return!1;break;case this.ELEMENT_NODE:if(this.namespaceURI!==e.namespaceURI)return!1;if(this.prefix!==e.prefix)return!1;if(this.localName!==e.localName)return!1;if(this.attributes.length!==e.attributes.length)return!1;for(var t=0;t<this.attributes.length;t++){var r=this.attributes.item(t);if(!r.isEqualNode(e.getAttributeNodeNS(r.namespaceURI,r.localName)))return!1}break;case this.ATTRIBUTE_NODE:if(this.namespaceURI!==e.namespaceURI)return!1;if(this.localName!==e.localName)return!1;if(this.value!==e.value)return!1;break;case this.PROCESSING_INSTRUCTION_NODE:if(this.target!==e.target||this.data!==e.data)return!1;break;case this.TEXT_NODE:case this.COMMENT_NODE:if(this.data!==e.data)return!1}if(this.childNodes.length!==e.childNodes.length)return!1;for(t=0;t<this.childNodes.length;t++)if(!this.childNodes[t].isEqualNode(e.childNodes[t]))return!1;return!0},isSameNode:function(e){return this===e},insertBefore:function(e,t){return pe(this,e,t)},replaceChild:function(e,t){pe(this,e,t,ue),t&&this.removeChild(t)},removeChild:function(e){return re(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return Ce(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==A&&e.nodeType==A?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap;if(r)for(var o in r)if(s(r,o)&&r[o]===e)return o;t=t.nodeType==O?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap;if(r&&s(r,e))return r[e];t=t.nodeType==O?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)},compareDocumentPosition:function(e){if(this===e)return 0;var t=e,r=this,o=null,n=null;if(t instanceof fe&&(t=(o=t).ownerElement),r instanceof fe&&(r=(n=r).ownerElement,o&&t&&r===t))for(var i,s=0;i=r.attributes[s];s++){if(i===o)return U.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+U.DOCUMENT_POSITION_PRECEDING;if(i===n)return U.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+U.DOCUMENT_POSITION_FOLLOWING}if(!t||!r||r.ownerDocument!==t.ownerDocument)return U.DOCUMENT_POSITION_DISCONNECTED+U.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC+(G(r.ownerDocument)>G(t.ownerDocument)?U.DOCUMENT_POSITION_FOLLOWING:U.DOCUMENT_POSITION_PRECEDING);var a=F(t),c=F(r);if(!o&&c.indexOf(t)>=0||n&&t===r)return U.DOCUMENT_POSITION_CONTAINS+U.DOCUMENT_POSITION_PRECEDING;if(!n&&a.indexOf(r)>=0||o&&t===r)return U.DOCUMENT_POSITION_CONTAINED_BY+U.DOCUMENT_POSITION_FOLLOWING;var l=V(c,a);for(var u in l.childNodes){var p=l.childNodes[u];if(p===r)return U.DOCUMENT_POSITION_FOLLOWING;if(p===t)return U.DOCUMENT_POSITION_PRECEDING;if(c.indexOf(p)>=0)return U.DOCUMENT_POSITION_FOLLOWING;if(a.indexOf(p)>=0)return U.DOCUMENT_POSITION_PRECEDING}return 0}},T(N,Q),T(N,Q.prototype),T(U,Q),T(U,Q.prototype),$.prototype={implementation:null,nodeName:"#document",nodeType:P,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType===k){for(var r=e.firstChild;r;){var o=r.nextSibling;this.insertBefore(r,t),r=o}return e}return pe(this,e,t),e.ownerDocument=this,null===this.documentElement&&e.nodeType===_&&(this.documentElement=e),e},removeChild:function(e){var t=re(this,e);return t===this.documentElement&&(this.documentElement=null),t},replaceChild:function(e,t){pe(this,e,t,ue),e.ownerDocument=this,t&&this.removeChild(t),ne(e)&&(this.documentElement=e)},importNode:function(e,t){return xe(this,e,t)},getElementById:function(e){var t=null;return Z(this.documentElement,(function(r){if(r.nodeType==_&&r.getAttribute("id")==e)return t=r,!0})),t},createElement:function(e){var t=new he(h);return t.ownerDocument=this,"html"===this.type&&(e=e.toLowerCase()),i(this.contentType)&&(t.namespaceURI=p.HTML),t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new j,(t.attributes=new X)._ownerElement=t,t},createDocumentFragment:function(){var e=new Se(h);return e.ownerDocument=this,e.childNodes=new j,e},createTextNode:function(e){var t=new ge(h);return t.ownerDocument=this,t.childNodes=new j,t.appendData(e),t},createComment:function(e){var t=new me(h);return t.ownerDocument=this,t.childNodes=new j,t.appendData(e),t},createCDATASection:function(e){var t=new Ee(h);return t.ownerDocument=this,t.childNodes=new j,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new Te(h);return r.ownerDocument=this,r.childNodes=new j,r.nodeName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){if(!m.QName_exact.test(e))throw new d(d.INVALID_CHARACTER_ERR,'invalid character in name "'+e+'"');return"html"===this.type&&(e=e.toLowerCase()),this._createAttribute(e)},_createAttribute:function(e){var t=new fe(h);return t.ownerDocument=this,t.childNodes=new j,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){if(!m.Name.test(e))throw new d(d.INVALID_CHARACTER_ERR,'not a valid xml name "'+e+'"');if("html"===this.type)throw new d("document is an html document",g.NotSupportedError);var t=new be(h);return t.ownerDocument=this,t.childNodes=new j,t.nodeName=e,t},createElementNS:function(e,t){var r=S(e,t),o=new he(h),n=o.attributes=new X;return o.childNodes=new j,o.ownerDocument=this,o.nodeName=t,o.tagName=t,o.namespaceURI=r[0],o.prefix=r[1],o.localName=r[2],n._ownerElement=o,o},createAttributeNS:function(e,t){var r=S(e,t),o=new fe(h);return o.ownerDocument=this,o.childNodes=new j,o.nodeName=t,o.name=t,o.specified=!0,o.namespaceURI=r[0],o.prefix=r[1],o.localName=r[2],o}},R($,Q),he.prototype={nodeType:_,attributes:null,getQualifiedName:function(){return this.prefix?this.prefix+":"+this.localName:this.localName},_isInHTMLDocumentAndNamespace:function(){return"html"===this.ownerDocument.type&&this.namespaceURI===p.HTML},hasAttribute:function(e){return!!this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t?t.value:null},getAttributeNode:function(e){return this._isInHTMLDocumentAndNamespace()&&(e=e.toLowerCase()),this.attributes.getNamedItem(e)},setAttribute:function(e,t){this._isInHTMLDocumentAndNamespace()&&(e=e.toLowerCase());var r=this.getAttributeNode(e);r?r.value=r.nodeValue=""+t:((r=this.ownerDocument._createAttribute(e)).value=r.nodeValue=""+t,this.setAttributeNode(r))},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r?r.value:null},setAttributeNS:function(e,t,r){var o=S(e,t)[2],n=this.getAttributeNodeNS(e,o);n?n.value=n.nodeValue=""+r:((n=this.ownerDocument.createAttributeNS(e,t)).value=n.nodeValue=""+r,this.setAttributeNode(n))},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByClassName:function(e){var t=w(e);return new H(this,(function(r){var o=[];return t.length>0&&Z(r,(function(n){if(n!==r&&n.nodeType===_){var i=n.getAttribute("class");if(i){var s=e===i;if(!s){var a=w(i);s=t.every((c=a,function(e){return c&&-1!==c.indexOf(e)}))}s&&o.push(n)}}var c})),o}))},getElementsByTagName:function(e){var t="html"===(this.nodeType===P?this:this.ownerDocument).type,r=e.toLowerCase();return new H(this,(function(o){var n=[];return Z(o,(function(i){i!==o&&i.nodeType===_&&(("*"===e||i.getQualifiedName()===(t&&i.namespaceURI===p.HTML?r:e))&&n.push(i))})),n}))},getElementsByTagNameNS:function(e,t){return new H(this,(function(r){var o=[];return Z(r,(function(n){n===r||n.nodeType!==_||"*"!==e&&n.namespaceURI!==e||"*"!==t&&n.localName!=t||o.push(n)})),o}))}},$.prototype.getElementsByClassName=he.prototype.getElementsByClassName,$.prototype.getElementsByTagName=he.prototype.getElementsByTagName,$.prototype.getElementsByTagNameNS=he.prototype.getElementsByTagNameNS,R(he,Q),fe.prototype.nodeType=O,R(fe,Q),de.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){r=this.data.substring(0,e)+r+this.data.substring(e+t),this.nodeValue=this.data=r,this.length=r.length}},R(de,Q),ge.prototype={nodeName:"#text",nodeType:A,splitText:function(e){var t=this.data,r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var o=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(o,this.nextSibling),o}},R(ge,de),me.prototype={nodeName:"#comment",nodeType:D},R(me,de),Ee.prototype={nodeName:"#cdata-section",nodeType:x},R(Ee,ge),ye.prototype.nodeType=L,R(ye,Q),ve.prototype.nodeType=q,R(ve,Q),we.prototype.nodeType=I,R(we,Q),be.prototype.nodeType=C,R(be,Q),Se.prototype.nodeName="#document-fragment",Se.prototype.nodeType=k,R(Se,Q),Te.prototype.nodeType=M,R(Te,de),Re.prototype.serializeToString=function(e,t){return Ne.call(e,t)},Q.prototype.toString=Ne;try{if(Object.defineProperty){function Me(e){switch(e.nodeType){case _:case k:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(Me(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(H.prototype,"length",{get:function(){return Y(this),this.$$length}}),Object.defineProperty(Q.prototype,"textContent",{get:function(){return Me(this)},set:function(e){switch(this.nodeType){case _:case k:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),Ie=function(e,t,r){e["$$"+t]=r}}}catch(De){}t._updateLiveList=Y,t.Attr=fe,t.CDATASection=Ee,t.CharacterData=de,t.Comment=me,t.Document=$,t.DocumentFragment=Se,t.DocumentType=ye,t.DOMImplementation=J,t.Element=he,t.Entity=we,t.EntityReference=be,t.LiveNodeList=H,t.NamedNodeMap=X,t.Node=Q,t.NodeList=j,t.Notation=ve,t.Text=ge,t.ProcessingInstruction=Te,t.XMLSerializer=Re},function(e,t,r){"use strict";function o(e){try{"function"!=typeof e&&(e=RegExp);var t=new e("𝌆","u").exec("𝌆");return!!t&&2===t[0].length}catch(e){}return!1}var n=o();function i(e){if("["!==e.source[0])throw new Error(e+" can not be used with chars");return e.source.slice(1,e.source.lastIndexOf("]"))}function s(e,t){if("["!==e.source[0])throw new Error("/"+e.source+"/ can not be used with chars_without");if(!t||"string"!=typeof t)throw new Error(JSON.stringify(t)+" is not a valid search");if(-1===e.source.indexOf(t))throw new Error('"'+t+'" is not is /'+e.source+"/");if("-"===t&&1!==e.source.indexOf(t))throw new Error('"'+t+'" is not at the first postion of /'+e.source+"/");return new RegExp(e.source.replace(t,""),n?"u":"")}function a(e){var t=this;return new RegExp(Array.prototype.slice.call(arguments).map((function(e){var r="string"==typeof e;if(r&&void 0===t&&"|"===e)throw new Error("use regg instead of reg to wrap expressions with `|`!");return r?e:e.source})).join(""),n?"mu":"m")}function c(e){if(0===arguments.length)throw new Error("no parameters provided");return a.apply(c,["(?:"].concat(Array.prototype.slice.call(arguments),[")"]))}var l=/[-\x09\x0A\x0D\x20-\x2C\x2E-\uD7FF\uE000-\uFFFD]/;n&&(l=a("[",i(l),"\\u{10000}-\\u{10FFFF}","]"));var u=/[\x20\x09\x0D\x0A]/,p=i(u),h=a(u,"+"),f=a(u,"*"),d=/[:_a-zA-Z\xC0-\xD6\xD8-\xF6\xF8-\u02FF\u0370-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/;n&&(d=a("[",i(d),"\\u{10000}-\\u{10FFFF}","]"));var g=a("[",i(d),i(/[-.0-9\xB7]/),i(/[\u0300-\u036F\u203F-\u2040]/),"]"),m=a(d,g,"*"),E=a(g,"+"),y=a("&",m,";"),v=c(/&#[0-9]+;|&#x[0-9a-fA-F]+;/),w=c(y,"|",v),b=a("%",m,";"),S=c(a('"',c(/[^%&"]/,"|",b,"|",w),"*",'"'),"|",a("'",c(/[^%&']/,"|",b,"|",w),"*","'")),T=c('"',c(/[^<&"]/,"|",w),"*",'"',"|","'",c(/[^<&']/,"|",w),"*","'"),R=a(s(d,":"),s(g,":"),"*"),N=a(R,c(":",R),"?"),_=a("^",N,"$"),O=a("(",N,")"),A=c(/"[^"]*"|'[^']*'/),x=a(/^<\?/,"(",m,")",c(h,"(",l,"*?)"),"?",/\?>/),C=/[\x20\x0D\x0Aa-zA-Z0-9-'()+,./:=?;!*#@$_%]/,I=c('"',C,'*"',"|","'",s(C,"'"),"*'"),M="\x3c!--",D=a(M,c(s(l,"-"),"|",a("-",s(l,"-"))),"*","--\x3e"),P="#PCDATA",L=c(a(/\(/,f,P,c(f,/\|/,f,N),"*",f,/\)\*/),"|",a(/\(/,f,P,f,/\)/)),k=c("EMPTY","|","ANY","|",L,"|",a(/\([^>]+\)/,/[?*+]?/)),q=a("<!ELEMENT",h,c(N,"|",b),h,c(k,"|",b),f,">"),U=a("NOTATION",h,/\(/,f,m,c(f,/\|/,f,m),"*",f,/\)/),F=a(/\(/,f,E,c(f,/\|/,f,E),"*",f,/\)/),V=c(U,"|",F),G=c(/CDATA|ID|IDREF|IDREFS|ENTITY|ENTITIES|NMTOKEN|NMTOKENS/,"|",V),j=c(/#REQUIRED|#IMPLIED/,"|",c(c("#FIXED",h),"?",T)),H=a("<!ATTLIST",h,m,c(h,m,h,G,h,j),"*",f,">"),Y="SYSTEM",X="PUBLIC",z=c(c(Y,h,A),"|",c(X,h,I,h,A)),B=a("^",c(c(Y,h,"(?<SystemLiteralOnly>",A,")"),"|",c(X,h,"(?<PubidLiteral>",I,")",h,"(?<SystemLiteral>",A,")"))),W=c(h,"NDATA",h,m),J="<!ENTITY",Q=a(J,h,m,h,c(S,"|",c(z,W,"?")),f,">"),K=c(S,"|",z),Z=c(Q,"|",a(J,h,"%",h,m,h,K,f,">")),$=a(X,h,I),ee=a("<!NOTATION",h,m,h,c(z,"|",$),f,">"),te=a(f,"=",f),re=/1[.]\d+/,oe=a(h,"version",te,c("'",re,"'","|",'"',re,'"')),ne=/[A-Za-z][-A-Za-z0-9._]*/,ie=a(/^<\?xml/,oe,c(h,"encoding",te,c('"',ne,'"',"|","'",ne,"'")),"?",c(h,"standalone",te,c("'",c("yes","|","no"),"'","|",'"',c("yes","|","no"),'"')),"?",f,/\?>/),se=a(l,"*?",/\]\]>/),ae=a(/<!\[CDATA\[/,se);t.chars=i,t.chars_without=s,t.detectUnicodeSupport=o,t.reg=a,t.regg=c,t.AttlistDecl=H,t.CDATA_START="<![CDATA[",t.CDATA_END="]]>",t.CDSect=ae,t.Char=l,t.Comment=D,t.COMMENT_START=M,t.COMMENT_END="--\x3e",t.DOCTYPE_DECL_START="<!DOCTYPE",t.elementdecl=q,t.EntityDecl=Z,t.EntityValue=S,t.ExternalID=z,t.ExternalID_match=B,t.Name=m,t.NotationDecl=ee,t.Reference=w,t.PEReference=b,t.PI=x,t.PUBLIC=X,t.PubidLiteral=I,t.QName=N,t.QName_exact=_,t.QName_group=O,t.S=h,t.SChar_s=p,t.S_OPT=f,t.SYSTEM=Y,t.SystemLiteral=A,t.UNICODE_REPLACEMENT_CHARACTER="�",t.UNICODE_SUPPORT=n,t.XMLDecl=ie},function(e,t,r){(function(t,r){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var o;o=function(){"use strict";function e(e){return"function"==typeof e}var o=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n=0,i=void 0,s=void 0,a=function(e,t){d[n]=e,d[n+1]=t,2===(n+=2)&&(s?s(g):w())},c="undefined"!=typeof window?window:void 0,l=c||{},u=l.MutationObserver||l.WebKitMutationObserver,p="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),h="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var e=setTimeout;return function(){return e(g,1)}}var d=new Array(1e3);function g(){for(var e=0;e<n;e+=2)(0,d[e])(d[e+1]),d[e]=void 0,d[e+1]=void 0;n=0}var m,E,y,v,w=void 0;function b(e,t){var r=this,o=new this.constructor(R);void 0===o[T]&&q(o);var n=r._state;if(n){var i=arguments[n-1];a((function(){return L(n,o,i,r._result)}))}else D(r,o,e,t);return o}function S(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(R);return x(t,e),t}p?w=function(){return t.nextTick(g)}:u?(E=0,y=new u(g),v=document.createTextNode(""),y.observe(v,{characterData:!0}),w=function(){v.data=E=++E%2}):h?((m=new MessageChannel).port1.onmessage=g,w=function(){return m.port2.postMessage(0)}):w=void 0===c?function(){try{var e=Function("return this")().require("vertx");return void 0!==(i=e.runOnLoop||e.runOnContext)?function(){i(g)}:f()}catch(e){return f()}}():f();var T=Math.random().toString(36).substring(2);function R(){}var N=void 0,_=1,O=2;function A(t,r,o){r.constructor===t.constructor&&o===b&&r.constructor.resolve===S?function(e,t){t._state===_?I(e,t._result):t._state===O?M(e,t._result):D(t,void 0,(function(t){return x(e,t)}),(function(t){return M(e,t)}))}(t,r):void 0===o?I(t,r):e(o)?function(e,t,r){a((function(e){var o=!1,n=function(e,t,r,o){try{e.call(t,r,o)}catch(e){return e}}(r,t,(function(r){o||(o=!0,t!==r?x(e,r):I(e,r))}),(function(t){o||(o=!0,M(e,t))}),e._label);!o&&n&&(o=!0,M(e,n))}),e)}(t,r,o):I(t,r)}function x(e,t){if(e===t)M(e,new TypeError("You cannot resolve a promise with itself"));else if(n=typeof(o=t),null===o||"object"!==n&&"function"!==n)I(e,t);else{var r=void 0;try{r=t.then}catch(t){return void M(e,t)}A(e,t,r)}var o,n}function C(e){e._onerror&&e._onerror(e._result),P(e)}function I(e,t){e._state===N&&(e._result=t,e._state=_,0!==e._subscribers.length&&a(P,e))}function M(e,t){e._state===N&&(e._state=O,e._result=t,a(C,e))}function D(e,t,r,o){var n=e._subscribers,i=n.length;e._onerror=null,n[i]=t,n[i+_]=r,n[i+O]=o,0===i&&e._state&&a(P,e)}function P(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var o=void 0,n=void 0,i=e._result,s=0;s<t.length;s+=3)o=t[s],n=t[s+r],o?L(r,o,n,i):n(i);e._subscribers.length=0}}function L(t,r,o,n){var i=e(o),s=void 0,a=void 0,c=!0;if(i){try{s=o(n)}catch(e){c=!1,a=e}if(r===s)return void M(r,new TypeError("A promises callback cannot return that same promise."))}else s=n;r._state!==N||(i&&c?x(r,s):!1===c?M(r,a):t===_?I(r,s):t===O&&M(r,s))}var k=0;function q(e){e[T]=k++,e._state=void 0,e._result=void 0,e._subscribers=[]}var U=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(R),this.promise[T]||q(this.promise),o(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?I(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&I(this.promise,this._result))):M(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===N&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,o=r.resolve;if(o===S){var n=void 0,i=void 0,s=!1;try{n=e.then}catch(e){s=!0,i=e}if(n===b&&e._state!==N)this._settledAt(e._state,t,e._result);else if("function"!=typeof n)this._remaining--,this._result[t]=e;else if(r===F){var a=new r(R);s?M(a,i):A(a,e,n),this._willSettleAt(a,t)}else this._willSettleAt(new r((function(t){return t(e)})),t)}else this._willSettleAt(o(e),t)},e.prototype._settledAt=function(e,t,r){var o=this.promise;o._state===N&&(this._remaining--,e===O?M(o,r):this._result[t]=r),0===this._remaining&&I(o,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;D(e,void 0,(function(e){return r._settledAt(_,t,e)}),(function(e){return r._settledAt(O,t,e)}))},e}(),F=function(){function t(e){this[T]=k++,this._result=this._state=void 0,this._subscribers=[],R!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(e,t){try{t((function(t){x(e,t)}),(function(t){M(e,t)}))}catch(t){M(e,t)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var r=this,o=r.constructor;return e(t)?r.then((function(e){return o.resolve(t()).then((function(){return e}))}),(function(e){return o.resolve(t()).then((function(){throw e}))})):r.then(t,t)},t}();return F.prototype.then=b,F.all=function(e){return new U(this,e).promise},F.race=function(e){var t=this;return o(e)?new t((function(r,o){for(var n=e.length,i=0;i<n;i++)t.resolve(e[i]).then(r,o)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))},F.resolve=S,F.reject=function(e){var t=new this(R);return M(t,e),t},F._setScheduler=function(e){s=e},F._setAsap=function(e){a=e},F._asap=a,F.polyfill=function(){var e=void 0;if(void 0!==r)e=r;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var o=null;try{o=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===o&&!t.cast)return}e.Promise=F},F.Promise=F,F},e.exports=o()}).call(this,r(10),r(11))},function(e,t,r){e.exports=r(15)},function(e,t){var r,o,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{o="function"==typeof clearTimeout?clearTimeout:s}catch(e){o=s}}();var c,l=[],u=!1,p=-1;function h(){u&&c&&(u=!1,c.length?l=c.concat(l):p=-1,l.length&&f())}function f(){if(!u){var e=a(h);u=!0;for(var t=l.length;t;){for(c=l,l=[];++p<t;)c&&c[p].run();p=-1,t=l.length}c=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===s||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{return o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function g(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new d(e,t)),1!==l.length||u||a(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";var o=r(0),n=r(6),i=r(2),s=r(13),a=r(14),c=n.DOMImplementation,l=o.hasDefaultHTMLNamespace,u=o.isHTMLMimeType,p=o.isValidMimeType,h=o.MIME_TYPE,f=o.NAMESPACE,d=i.ParseError,g=a.XMLReader;function m(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function E(e){if(e=e||{locator:!0},this.assign=e.assign||o.assign,this.domHandler=e.domHandler||y,this.onError=e.onError||e.errorHandler,e.errorHandler&&"function"!=typeof e.errorHandler)throw new TypeError("errorHandler object is no longer supported, switch to onError!");e.errorHandler&&e.errorHandler("warning","The `errorHandler` option has been deprecated, use `onError` instead!",this),this.normalizeLineEndings=e.normalizeLineEndings||m,this.locator=!!e.locator,this.xmlns=this.assign(Object.create(null),e.xmlns)}function y(e){var t=e||{};this.mimeType=t.mimeType||h.XML_APPLICATION,this.defaultNamespace=t.defaultNamespace||null,this.cdata=!1,this.currentElement=void 0,this.doc=void 0,this.locator=void 0,this.onError=t.onError}function v(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function w(e,t,r){return"string"==typeof e?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}function b(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}E.prototype.parseFromString=function(e,t){if(!p(t))throw new TypeError('DOMParser.parseFromString: the provided mimeType "'+t+'" is not valid.');var r=this.assign(Object.create(null),this.xmlns),n=s.XML_ENTITIES,i=r[""]||null;l(t)?(n=s.HTML_ENTITIES,i=f.HTML):t===h.XML_SVG_IMAGE&&(i=f.SVG),r[""]=i,r.xml=r.xml||f.XML;var a=new this.domHandler({mimeType:t,defaultNamespace:i,onError:this.onError}),c=this.locator?{}:void 0;this.locator&&a.setDocumentLocator(c);var u=new g;return u.errorHandler=a,u.domBuilder=a,!o.isHTMLMimeType(t)&&"string"!=typeof e&&u.errorHandler.fatalError("source is not a string"),u.parse(this.normalizeLineEndings(String(e)),r,n),a.doc.documentElement||u.errorHandler.fatalError("missing root element"),a.doc},y.prototype={startDocument:function(){var e=new c;this.doc=u(this.mimeType)?e.createHTMLDocument(!1):e.createDocument(this.defaultNamespace,"")},startElement:function(e,t,r,o){var n=this.doc,i=n.createElementNS(e,r||t),s=o.length;b(this,i),this.currentElement=i,this.locator&&v(this.locator,i);for(var a=0;a<s;a++){e=o.getURI(a);var c=o.getValue(a),l=(r=o.getQName(a),n.createAttributeNS(e,r));this.locator&&v(o.getLocator(a),l),l.value=l.nodeValue=c,i.setAttributeNode(l)}},endElement:function(e,t,r){this.currentElement=this.currentElement.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&v(this.locator,r),b(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=w.apply(this,arguments)){if(this.cdata)var o=this.doc.createCDATASection(e);else o=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(o):/^\s*$/.test(e)&&this.doc.appendChild(o),this.locator&&v(this.locator,o)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){e&&(e.lineNumber=0),this.locator=e},comment:function(e,t,r){e=w.apply(this,arguments);var o=this.doc.createComment(e);this.locator&&v(this.locator,o),b(this,o)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r,o){var n=this.doc.implementation;if(n&&n.createDocumentType){var i=n.createDocumentType(e,t,r,o);this.locator&&v(this.locator,i),b(this,i),this.doc.doctype=i}},reportError:function(e,t){if("function"==typeof this.onError)try{this.onError(e,t,this)}catch(r){throw new d("Reporting "+e+' "'+t+'" caused '+r,this.locator)}else console.error("[xmldom "+e+"]\t"+t,function(e){if(e)return"\n@#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}(this.locator))},warning:function(e){this.reportError("warning",e)},error:function(e){this.reportError("error",e)},fatalError:function(e){throw this.reportError("fatalError",e),new d(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){y.prototype[e]=function(){return null}})),t.__DOMHandler=y,t.DOMParser=E,t.normalizeLineEndings=m,t.onErrorStopParsing=function(e){if("error"===e)throw"onErrorStopParsing"},t.onWarningStopParsing=function(){throw"onWarningStopParsing"}},function(e,t,r){"use strict";var o=r(0).freeze;t.XML_ENTITIES=o({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=o({Aacute:"Á",aacute:"á",Abreve:"Ă",abreve:"ă",ac:"∾",acd:"∿",acE:"∾̳",Acirc:"Â",acirc:"â",acute:"´",Acy:"А",acy:"а",AElig:"Æ",aelig:"æ",af:"⁡",Afr:"𝔄",afr:"𝔞",Agrave:"À",agrave:"à",alefsym:"ℵ",aleph:"ℵ",Alpha:"Α",alpha:"α",Amacr:"Ā",amacr:"ā",amalg:"⨿",AMP:"&",amp:"&",And:"⩓",and:"∧",andand:"⩕",andd:"⩜",andslope:"⩘",andv:"⩚",ang:"∠",ange:"⦤",angle:"∠",angmsd:"∡",angmsdaa:"⦨",angmsdab:"⦩",angmsdac:"⦪",angmsdad:"⦫",angmsdae:"⦬",angmsdaf:"⦭",angmsdag:"⦮",angmsdah:"⦯",angrt:"∟",angrtvb:"⊾",angrtvbd:"⦝",angsph:"∢",angst:"Å",angzarr:"⍼",Aogon:"Ą",aogon:"ą",Aopf:"𝔸",aopf:"𝕒",ap:"≈",apacir:"⩯",apE:"⩰",ape:"≊",apid:"≋",apos:"'",ApplyFunction:"⁡",approx:"≈",approxeq:"≊",Aring:"Å",aring:"å",Ascr:"𝒜",ascr:"𝒶",Assign:"≔",ast:"*",asymp:"≈",asympeq:"≍",Atilde:"Ã",atilde:"ã",Auml:"Ä",auml:"ä",awconint:"∳",awint:"⨑",backcong:"≌",backepsilon:"϶",backprime:"‵",backsim:"∽",backsimeq:"⋍",Backslash:"∖",Barv:"⫧",barvee:"⊽",Barwed:"⌆",barwed:"⌅",barwedge:"⌅",bbrk:"⎵",bbrktbrk:"⎶",bcong:"≌",Bcy:"Б",bcy:"б",bdquo:"„",becaus:"∵",Because:"∵",because:"∵",bemptyv:"⦰",bepsi:"϶",bernou:"ℬ",Bernoullis:"ℬ",Beta:"Β",beta:"β",beth:"ℶ",between:"≬",Bfr:"𝔅",bfr:"𝔟",bigcap:"⋂",bigcirc:"◯",bigcup:"⋃",bigodot:"⨀",bigoplus:"⨁",bigotimes:"⨂",bigsqcup:"⨆",bigstar:"★",bigtriangledown:"▽",bigtriangleup:"△",biguplus:"⨄",bigvee:"⋁",bigwedge:"⋀",bkarow:"⤍",blacklozenge:"⧫",blacksquare:"▪",blacktriangle:"▴",blacktriangledown:"▾",blacktriangleleft:"◂",blacktriangleright:"▸",blank:"␣",blk12:"▒",blk14:"░",blk34:"▓",block:"█",bne:"=⃥",bnequiv:"≡⃥",bNot:"⫭",bnot:"⌐",Bopf:"𝔹",bopf:"𝕓",bot:"⊥",bottom:"⊥",bowtie:"⋈",boxbox:"⧉",boxDL:"╗",boxDl:"╖",boxdL:"╕",boxdl:"┐",boxDR:"╔",boxDr:"╓",boxdR:"╒",boxdr:"┌",boxH:"═",boxh:"─",boxHD:"╦",boxHd:"╤",boxhD:"╥",boxhd:"┬",boxHU:"╩",boxHu:"╧",boxhU:"╨",boxhu:"┴",boxminus:"⊟",boxplus:"⊞",boxtimes:"⊠",boxUL:"╝",boxUl:"╜",boxuL:"╛",boxul:"┘",boxUR:"╚",boxUr:"╙",boxuR:"╘",boxur:"└",boxV:"║",boxv:"│",boxVH:"╬",boxVh:"╫",boxvH:"╪",boxvh:"┼",boxVL:"╣",boxVl:"╢",boxvL:"╡",boxvl:"┤",boxVR:"╠",boxVr:"╟",boxvR:"╞",boxvr:"├",bprime:"‵",Breve:"˘",breve:"˘",brvbar:"¦",Bscr:"ℬ",bscr:"𝒷",bsemi:"⁏",bsim:"∽",bsime:"⋍",bsol:"\\",bsolb:"⧅",bsolhsub:"⟈",bull:"•",bullet:"•",bump:"≎",bumpE:"⪮",bumpe:"≏",Bumpeq:"≎",bumpeq:"≏",Cacute:"Ć",cacute:"ć",Cap:"⋒",cap:"∩",capand:"⩄",capbrcup:"⩉",capcap:"⩋",capcup:"⩇",capdot:"⩀",CapitalDifferentialD:"ⅅ",caps:"∩︀",caret:"⁁",caron:"ˇ",Cayleys:"ℭ",ccaps:"⩍",Ccaron:"Č",ccaron:"č",Ccedil:"Ç",ccedil:"ç",Ccirc:"Ĉ",ccirc:"ĉ",Cconint:"∰",ccups:"⩌",ccupssm:"⩐",Cdot:"Ċ",cdot:"ċ",cedil:"¸",Cedilla:"¸",cemptyv:"⦲",cent:"¢",CenterDot:"·",centerdot:"·",Cfr:"ℭ",cfr:"𝔠",CHcy:"Ч",chcy:"ч",check:"✓",checkmark:"✓",Chi:"Χ",chi:"χ",cir:"○",circ:"ˆ",circeq:"≗",circlearrowleft:"↺",circlearrowright:"↻",circledast:"⊛",circledcirc:"⊚",circleddash:"⊝",CircleDot:"⊙",circledR:"®",circledS:"Ⓢ",CircleMinus:"⊖",CirclePlus:"⊕",CircleTimes:"⊗",cirE:"⧃",cire:"≗",cirfnint:"⨐",cirmid:"⫯",cirscir:"⧂",ClockwiseContourIntegral:"∲",CloseCurlyDoubleQuote:"”",CloseCurlyQuote:"’",clubs:"♣",clubsuit:"♣",Colon:"∷",colon:":",Colone:"⩴",colone:"≔",coloneq:"≔",comma:",",commat:"@",comp:"∁",compfn:"∘",complement:"∁",complexes:"ℂ",cong:"≅",congdot:"⩭",Congruent:"≡",Conint:"∯",conint:"∮",ContourIntegral:"∮",Copf:"ℂ",copf:"𝕔",coprod:"∐",Coproduct:"∐",COPY:"©",copy:"©",copysr:"℗",CounterClockwiseContourIntegral:"∳",crarr:"↵",Cross:"⨯",cross:"✗",Cscr:"𝒞",cscr:"𝒸",csub:"⫏",csube:"⫑",csup:"⫐",csupe:"⫒",ctdot:"⋯",cudarrl:"⤸",cudarrr:"⤵",cuepr:"⋞",cuesc:"⋟",cularr:"↶",cularrp:"⤽",Cup:"⋓",cup:"∪",cupbrcap:"⩈",CupCap:"≍",cupcap:"⩆",cupcup:"⩊",cupdot:"⊍",cupor:"⩅",cups:"∪︀",curarr:"↷",curarrm:"⤼",curlyeqprec:"⋞",curlyeqsucc:"⋟",curlyvee:"⋎",curlywedge:"⋏",curren:"¤",curvearrowleft:"↶",curvearrowright:"↷",cuvee:"⋎",cuwed:"⋏",cwconint:"∲",cwint:"∱",cylcty:"⌭",Dagger:"‡",dagger:"†",daleth:"ℸ",Darr:"↡",dArr:"⇓",darr:"↓",dash:"‐",Dashv:"⫤",dashv:"⊣",dbkarow:"⤏",dblac:"˝",Dcaron:"Ď",dcaron:"ď",Dcy:"Д",dcy:"д",DD:"ⅅ",dd:"ⅆ",ddagger:"‡",ddarr:"⇊",DDotrahd:"⤑",ddotseq:"⩷",deg:"°",Del:"∇",Delta:"Δ",delta:"δ",demptyv:"⦱",dfisht:"⥿",Dfr:"𝔇",dfr:"𝔡",dHar:"⥥",dharl:"⇃",dharr:"⇂",DiacriticalAcute:"´",DiacriticalDot:"˙",DiacriticalDoubleAcute:"˝",DiacriticalGrave:"`",DiacriticalTilde:"˜",diam:"⋄",Diamond:"⋄",diamond:"⋄",diamondsuit:"♦",diams:"♦",die:"¨",DifferentialD:"ⅆ",digamma:"ϝ",disin:"⋲",div:"÷",divide:"÷",divideontimes:"⋇",divonx:"⋇",DJcy:"Ђ",djcy:"ђ",dlcorn:"⌞",dlcrop:"⌍",dollar:"$",Dopf:"𝔻",dopf:"𝕕",Dot:"¨",dot:"˙",DotDot:"⃜",doteq:"≐",doteqdot:"≑",DotEqual:"≐",dotminus:"∸",dotplus:"∔",dotsquare:"⊡",doublebarwedge:"⌆",DoubleContourIntegral:"∯",DoubleDot:"¨",DoubleDownArrow:"⇓",DoubleLeftArrow:"⇐",DoubleLeftRightArrow:"⇔",DoubleLeftTee:"⫤",DoubleLongLeftArrow:"⟸",DoubleLongLeftRightArrow:"⟺",DoubleLongRightArrow:"⟹",DoubleRightArrow:"⇒",DoubleRightTee:"⊨",DoubleUpArrow:"⇑",DoubleUpDownArrow:"⇕",DoubleVerticalBar:"∥",DownArrow:"↓",Downarrow:"⇓",downarrow:"↓",DownArrowBar:"⤓",DownArrowUpArrow:"⇵",DownBreve:"̑",downdownarrows:"⇊",downharpoonleft:"⇃",downharpoonright:"⇂",DownLeftRightVector:"⥐",DownLeftTeeVector:"⥞",DownLeftVector:"↽",DownLeftVectorBar:"⥖",DownRightTeeVector:"⥟",DownRightVector:"⇁",DownRightVectorBar:"⥗",DownTee:"⊤",DownTeeArrow:"↧",drbkarow:"⤐",drcorn:"⌟",drcrop:"⌌",Dscr:"𝒟",dscr:"𝒹",DScy:"Ѕ",dscy:"ѕ",dsol:"⧶",Dstrok:"Đ",dstrok:"đ",dtdot:"⋱",dtri:"▿",dtrif:"▾",duarr:"⇵",duhar:"⥯",dwangle:"⦦",DZcy:"Џ",dzcy:"џ",dzigrarr:"⟿",Eacute:"É",eacute:"é",easter:"⩮",Ecaron:"Ě",ecaron:"ě",ecir:"≖",Ecirc:"Ê",ecirc:"ê",ecolon:"≕",Ecy:"Э",ecy:"э",eDDot:"⩷",Edot:"Ė",eDot:"≑",edot:"ė",ee:"ⅇ",efDot:"≒",Efr:"𝔈",efr:"𝔢",eg:"⪚",Egrave:"È",egrave:"è",egs:"⪖",egsdot:"⪘",el:"⪙",Element:"∈",elinters:"⏧",ell:"ℓ",els:"⪕",elsdot:"⪗",Emacr:"Ē",emacr:"ē",empty:"∅",emptyset:"∅",EmptySmallSquare:"◻",emptyv:"∅",EmptyVerySmallSquare:"▫",emsp:" ",emsp13:" ",emsp14:" ",ENG:"Ŋ",eng:"ŋ",ensp:" ",Eogon:"Ę",eogon:"ę",Eopf:"𝔼",eopf:"𝕖",epar:"⋕",eparsl:"⧣",eplus:"⩱",epsi:"ε",Epsilon:"Ε",epsilon:"ε",epsiv:"ϵ",eqcirc:"≖",eqcolon:"≕",eqsim:"≂",eqslantgtr:"⪖",eqslantless:"⪕",Equal:"⩵",equals:"=",EqualTilde:"≂",equest:"≟",Equilibrium:"⇌",equiv:"≡",equivDD:"⩸",eqvparsl:"⧥",erarr:"⥱",erDot:"≓",Escr:"ℰ",escr:"ℯ",esdot:"≐",Esim:"⩳",esim:"≂",Eta:"Η",eta:"η",ETH:"Ð",eth:"ð",Euml:"Ë",euml:"ë",euro:"€",excl:"!",exist:"∃",Exists:"∃",expectation:"ℰ",ExponentialE:"ⅇ",exponentiale:"ⅇ",fallingdotseq:"≒",Fcy:"Ф",fcy:"ф",female:"♀",ffilig:"ﬃ",fflig:"ﬀ",ffllig:"ﬄ",Ffr:"𝔉",ffr:"𝔣",filig:"ﬁ",FilledSmallSquare:"◼",FilledVerySmallSquare:"▪",fjlig:"fj",flat:"♭",fllig:"ﬂ",fltns:"▱",fnof:"ƒ",Fopf:"𝔽",fopf:"𝕗",ForAll:"∀",forall:"∀",fork:"⋔",forkv:"⫙",Fouriertrf:"ℱ",fpartint:"⨍",frac12:"½",frac13:"⅓",frac14:"¼",frac15:"⅕",frac16:"⅙",frac18:"⅛",frac23:"⅔",frac25:"⅖",frac34:"¾",frac35:"⅗",frac38:"⅜",frac45:"⅘",frac56:"⅚",frac58:"⅝",frac78:"⅞",frasl:"⁄",frown:"⌢",Fscr:"ℱ",fscr:"𝒻",gacute:"ǵ",Gamma:"Γ",gamma:"γ",Gammad:"Ϝ",gammad:"ϝ",gap:"⪆",Gbreve:"Ğ",gbreve:"ğ",Gcedil:"Ģ",Gcirc:"Ĝ",gcirc:"ĝ",Gcy:"Г",gcy:"г",Gdot:"Ġ",gdot:"ġ",gE:"≧",ge:"≥",gEl:"⪌",gel:"⋛",geq:"≥",geqq:"≧",geqslant:"⩾",ges:"⩾",gescc:"⪩",gesdot:"⪀",gesdoto:"⪂",gesdotol:"⪄",gesl:"⋛︀",gesles:"⪔",Gfr:"𝔊",gfr:"𝔤",Gg:"⋙",gg:"≫",ggg:"⋙",gimel:"ℷ",GJcy:"Ѓ",gjcy:"ѓ",gl:"≷",gla:"⪥",glE:"⪒",glj:"⪤",gnap:"⪊",gnapprox:"⪊",gnE:"≩",gne:"⪈",gneq:"⪈",gneqq:"≩",gnsim:"⋧",Gopf:"𝔾",gopf:"𝕘",grave:"`",GreaterEqual:"≥",GreaterEqualLess:"⋛",GreaterFullEqual:"≧",GreaterGreater:"⪢",GreaterLess:"≷",GreaterSlantEqual:"⩾",GreaterTilde:"≳",Gscr:"𝒢",gscr:"ℊ",gsim:"≳",gsime:"⪎",gsiml:"⪐",Gt:"≫",GT:">",gt:">",gtcc:"⪧",gtcir:"⩺",gtdot:"⋗",gtlPar:"⦕",gtquest:"⩼",gtrapprox:"⪆",gtrarr:"⥸",gtrdot:"⋗",gtreqless:"⋛",gtreqqless:"⪌",gtrless:"≷",gtrsim:"≳",gvertneqq:"≩︀",gvnE:"≩︀",Hacek:"ˇ",hairsp:" ",half:"½",hamilt:"ℋ",HARDcy:"Ъ",hardcy:"ъ",hArr:"⇔",harr:"↔",harrcir:"⥈",harrw:"↭",Hat:"^",hbar:"ℏ",Hcirc:"Ĥ",hcirc:"ĥ",hearts:"♥",heartsuit:"♥",hellip:"…",hercon:"⊹",Hfr:"ℌ",hfr:"𝔥",HilbertSpace:"ℋ",hksearow:"⤥",hkswarow:"⤦",hoarr:"⇿",homtht:"∻",hookleftarrow:"↩",hookrightarrow:"↪",Hopf:"ℍ",hopf:"𝕙",horbar:"―",HorizontalLine:"─",Hscr:"ℋ",hscr:"𝒽",hslash:"ℏ",Hstrok:"Ħ",hstrok:"ħ",HumpDownHump:"≎",HumpEqual:"≏",hybull:"⁃",hyphen:"‐",Iacute:"Í",iacute:"í",ic:"⁣",Icirc:"Î",icirc:"î",Icy:"И",icy:"и",Idot:"İ",IEcy:"Е",iecy:"е",iexcl:"¡",iff:"⇔",Ifr:"ℑ",ifr:"𝔦",Igrave:"Ì",igrave:"ì",ii:"ⅈ",iiiint:"⨌",iiint:"∭",iinfin:"⧜",iiota:"℩",IJlig:"Ĳ",ijlig:"ĳ",Im:"ℑ",Imacr:"Ī",imacr:"ī",image:"ℑ",ImaginaryI:"ⅈ",imagline:"ℐ",imagpart:"ℑ",imath:"ı",imof:"⊷",imped:"Ƶ",Implies:"⇒",in:"∈",incare:"℅",infin:"∞",infintie:"⧝",inodot:"ı",Int:"∬",int:"∫",intcal:"⊺",integers:"ℤ",Integral:"∫",intercal:"⊺",Intersection:"⋂",intlarhk:"⨗",intprod:"⨼",InvisibleComma:"⁣",InvisibleTimes:"⁢",IOcy:"Ё",iocy:"ё",Iogon:"Į",iogon:"į",Iopf:"𝕀",iopf:"𝕚",Iota:"Ι",iota:"ι",iprod:"⨼",iquest:"¿",Iscr:"ℐ",iscr:"𝒾",isin:"∈",isindot:"⋵",isinE:"⋹",isins:"⋴",isinsv:"⋳",isinv:"∈",it:"⁢",Itilde:"Ĩ",itilde:"ĩ",Iukcy:"І",iukcy:"і",Iuml:"Ï",iuml:"ï",Jcirc:"Ĵ",jcirc:"ĵ",Jcy:"Й",jcy:"й",Jfr:"𝔍",jfr:"𝔧",jmath:"ȷ",Jopf:"𝕁",jopf:"𝕛",Jscr:"𝒥",jscr:"𝒿",Jsercy:"Ј",jsercy:"ј",Jukcy:"Є",jukcy:"є",Kappa:"Κ",kappa:"κ",kappav:"ϰ",Kcedil:"Ķ",kcedil:"ķ",Kcy:"К",kcy:"к",Kfr:"𝔎",kfr:"𝔨",kgreen:"ĸ",KHcy:"Х",khcy:"х",KJcy:"Ќ",kjcy:"ќ",Kopf:"𝕂",kopf:"𝕜",Kscr:"𝒦",kscr:"𝓀",lAarr:"⇚",Lacute:"Ĺ",lacute:"ĺ",laemptyv:"⦴",lagran:"ℒ",Lambda:"Λ",lambda:"λ",Lang:"⟪",lang:"⟨",langd:"⦑",langle:"⟨",lap:"⪅",Laplacetrf:"ℒ",laquo:"«",Larr:"↞",lArr:"⇐",larr:"←",larrb:"⇤",larrbfs:"⤟",larrfs:"⤝",larrhk:"↩",larrlp:"↫",larrpl:"⤹",larrsim:"⥳",larrtl:"↢",lat:"⪫",lAtail:"⤛",latail:"⤙",late:"⪭",lates:"⪭︀",lBarr:"⤎",lbarr:"⤌",lbbrk:"❲",lbrace:"{",lbrack:"[",lbrke:"⦋",lbrksld:"⦏",lbrkslu:"⦍",Lcaron:"Ľ",lcaron:"ľ",Lcedil:"Ļ",lcedil:"ļ",lceil:"⌈",lcub:"{",Lcy:"Л",lcy:"л",ldca:"⤶",ldquo:"“",ldquor:"„",ldrdhar:"⥧",ldrushar:"⥋",ldsh:"↲",lE:"≦",le:"≤",LeftAngleBracket:"⟨",LeftArrow:"←",Leftarrow:"⇐",leftarrow:"←",LeftArrowBar:"⇤",LeftArrowRightArrow:"⇆",leftarrowtail:"↢",LeftCeiling:"⌈",LeftDoubleBracket:"⟦",LeftDownTeeVector:"⥡",LeftDownVector:"⇃",LeftDownVectorBar:"⥙",LeftFloor:"⌊",leftharpoondown:"↽",leftharpoonup:"↼",leftleftarrows:"⇇",LeftRightArrow:"↔",Leftrightarrow:"⇔",leftrightarrow:"↔",leftrightarrows:"⇆",leftrightharpoons:"⇋",leftrightsquigarrow:"↭",LeftRightVector:"⥎",LeftTee:"⊣",LeftTeeArrow:"↤",LeftTeeVector:"⥚",leftthreetimes:"⋋",LeftTriangle:"⊲",LeftTriangleBar:"⧏",LeftTriangleEqual:"⊴",LeftUpDownVector:"⥑",LeftUpTeeVector:"⥠",LeftUpVector:"↿",LeftUpVectorBar:"⥘",LeftVector:"↼",LeftVectorBar:"⥒",lEg:"⪋",leg:"⋚",leq:"≤",leqq:"≦",leqslant:"⩽",les:"⩽",lescc:"⪨",lesdot:"⩿",lesdoto:"⪁",lesdotor:"⪃",lesg:"⋚︀",lesges:"⪓",lessapprox:"⪅",lessdot:"⋖",lesseqgtr:"⋚",lesseqqgtr:"⪋",LessEqualGreater:"⋚",LessFullEqual:"≦",LessGreater:"≶",lessgtr:"≶",LessLess:"⪡",lesssim:"≲",LessSlantEqual:"⩽",LessTilde:"≲",lfisht:"⥼",lfloor:"⌊",Lfr:"𝔏",lfr:"𝔩",lg:"≶",lgE:"⪑",lHar:"⥢",lhard:"↽",lharu:"↼",lharul:"⥪",lhblk:"▄",LJcy:"Љ",ljcy:"љ",Ll:"⋘",ll:"≪",llarr:"⇇",llcorner:"⌞",Lleftarrow:"⇚",llhard:"⥫",lltri:"◺",Lmidot:"Ŀ",lmidot:"ŀ",lmoust:"⎰",lmoustache:"⎰",lnap:"⪉",lnapprox:"⪉",lnE:"≨",lne:"⪇",lneq:"⪇",lneqq:"≨",lnsim:"⋦",loang:"⟬",loarr:"⇽",lobrk:"⟦",LongLeftArrow:"⟵",Longleftarrow:"⟸",longleftarrow:"⟵",LongLeftRightArrow:"⟷",Longleftrightarrow:"⟺",longleftrightarrow:"⟷",longmapsto:"⟼",LongRightArrow:"⟶",Longrightarrow:"⟹",longrightarrow:"⟶",looparrowleft:"↫",looparrowright:"↬",lopar:"⦅",Lopf:"𝕃",lopf:"𝕝",loplus:"⨭",lotimes:"⨴",lowast:"∗",lowbar:"_",LowerLeftArrow:"↙",LowerRightArrow:"↘",loz:"◊",lozenge:"◊",lozf:"⧫",lpar:"(",lparlt:"⦓",lrarr:"⇆",lrcorner:"⌟",lrhar:"⇋",lrhard:"⥭",lrm:"‎",lrtri:"⊿",lsaquo:"‹",Lscr:"ℒ",lscr:"𝓁",Lsh:"↰",lsh:"↰",lsim:"≲",lsime:"⪍",lsimg:"⪏",lsqb:"[",lsquo:"‘",lsquor:"‚",Lstrok:"Ł",lstrok:"ł",Lt:"≪",LT:"<",lt:"<",ltcc:"⪦",ltcir:"⩹",ltdot:"⋖",lthree:"⋋",ltimes:"⋉",ltlarr:"⥶",ltquest:"⩻",ltri:"◃",ltrie:"⊴",ltrif:"◂",ltrPar:"⦖",lurdshar:"⥊",luruhar:"⥦",lvertneqq:"≨︀",lvnE:"≨︀",macr:"¯",male:"♂",malt:"✠",maltese:"✠",Map:"⤅",map:"↦",mapsto:"↦",mapstodown:"↧",mapstoleft:"↤",mapstoup:"↥",marker:"▮",mcomma:"⨩",Mcy:"М",mcy:"м",mdash:"—",mDDot:"∺",measuredangle:"∡",MediumSpace:" ",Mellintrf:"ℳ",Mfr:"𝔐",mfr:"𝔪",mho:"℧",micro:"µ",mid:"∣",midast:"*",midcir:"⫰",middot:"·",minus:"−",minusb:"⊟",minusd:"∸",minusdu:"⨪",MinusPlus:"∓",mlcp:"⫛",mldr:"…",mnplus:"∓",models:"⊧",Mopf:"𝕄",mopf:"𝕞",mp:"∓",Mscr:"ℳ",mscr:"𝓂",mstpos:"∾",Mu:"Μ",mu:"μ",multimap:"⊸",mumap:"⊸",nabla:"∇",Nacute:"Ń",nacute:"ń",nang:"∠⃒",nap:"≉",napE:"⩰̸",napid:"≋̸",napos:"ŉ",napprox:"≉",natur:"♮",natural:"♮",naturals:"ℕ",nbsp:" ",nbump:"≎̸",nbumpe:"≏̸",ncap:"⩃",Ncaron:"Ň",ncaron:"ň",Ncedil:"Ņ",ncedil:"ņ",ncong:"≇",ncongdot:"⩭̸",ncup:"⩂",Ncy:"Н",ncy:"н",ndash:"–",ne:"≠",nearhk:"⤤",neArr:"⇗",nearr:"↗",nearrow:"↗",nedot:"≐̸",NegativeMediumSpace:"​",NegativeThickSpace:"​",NegativeThinSpace:"​",NegativeVeryThinSpace:"​",nequiv:"≢",nesear:"⤨",nesim:"≂̸",NestedGreaterGreater:"≫",NestedLessLess:"≪",NewLine:"\n",nexist:"∄",nexists:"∄",Nfr:"𝔑",nfr:"𝔫",ngE:"≧̸",nge:"≱",ngeq:"≱",ngeqq:"≧̸",ngeqslant:"⩾̸",nges:"⩾̸",nGg:"⋙̸",ngsim:"≵",nGt:"≫⃒",ngt:"≯",ngtr:"≯",nGtv:"≫̸",nhArr:"⇎",nharr:"↮",nhpar:"⫲",ni:"∋",nis:"⋼",nisd:"⋺",niv:"∋",NJcy:"Њ",njcy:"њ",nlArr:"⇍",nlarr:"↚",nldr:"‥",nlE:"≦̸",nle:"≰",nLeftarrow:"⇍",nleftarrow:"↚",nLeftrightarrow:"⇎",nleftrightarrow:"↮",nleq:"≰",nleqq:"≦̸",nleqslant:"⩽̸",nles:"⩽̸",nless:"≮",nLl:"⋘̸",nlsim:"≴",nLt:"≪⃒",nlt:"≮",nltri:"⋪",nltrie:"⋬",nLtv:"≪̸",nmid:"∤",NoBreak:"⁠",NonBreakingSpace:" ",Nopf:"ℕ",nopf:"𝕟",Not:"⫬",not:"¬",NotCongruent:"≢",NotCupCap:"≭",NotDoubleVerticalBar:"∦",NotElement:"∉",NotEqual:"≠",NotEqualTilde:"≂̸",NotExists:"∄",NotGreater:"≯",NotGreaterEqual:"≱",NotGreaterFullEqual:"≧̸",NotGreaterGreater:"≫̸",NotGreaterLess:"≹",NotGreaterSlantEqual:"⩾̸",NotGreaterTilde:"≵",NotHumpDownHump:"≎̸",NotHumpEqual:"≏̸",notin:"∉",notindot:"⋵̸",notinE:"⋹̸",notinva:"∉",notinvb:"⋷",notinvc:"⋶",NotLeftTriangle:"⋪",NotLeftTriangleBar:"⧏̸",NotLeftTriangleEqual:"⋬",NotLess:"≮",NotLessEqual:"≰",NotLessGreater:"≸",NotLessLess:"≪̸",NotLessSlantEqual:"⩽̸",NotLessTilde:"≴",NotNestedGreaterGreater:"⪢̸",NotNestedLessLess:"⪡̸",notni:"∌",notniva:"∌",notnivb:"⋾",notnivc:"⋽",NotPrecedes:"⊀",NotPrecedesEqual:"⪯̸",NotPrecedesSlantEqual:"⋠",NotReverseElement:"∌",NotRightTriangle:"⋫",NotRightTriangleBar:"⧐̸",NotRightTriangleEqual:"⋭",NotSquareSubset:"⊏̸",NotSquareSubsetEqual:"⋢",NotSquareSuperset:"⊐̸",NotSquareSupersetEqual:"⋣",NotSubset:"⊂⃒",NotSubsetEqual:"⊈",NotSucceeds:"⊁",NotSucceedsEqual:"⪰̸",NotSucceedsSlantEqual:"⋡",NotSucceedsTilde:"≿̸",NotSuperset:"⊃⃒",NotSupersetEqual:"⊉",NotTilde:"≁",NotTildeEqual:"≄",NotTildeFullEqual:"≇",NotTildeTilde:"≉",NotVerticalBar:"∤",npar:"∦",nparallel:"∦",nparsl:"⫽⃥",npart:"∂̸",npolint:"⨔",npr:"⊀",nprcue:"⋠",npre:"⪯̸",nprec:"⊀",npreceq:"⪯̸",nrArr:"⇏",nrarr:"↛",nrarrc:"⤳̸",nrarrw:"↝̸",nRightarrow:"⇏",nrightarrow:"↛",nrtri:"⋫",nrtrie:"⋭",nsc:"⊁",nsccue:"⋡",nsce:"⪰̸",Nscr:"𝒩",nscr:"𝓃",nshortmid:"∤",nshortparallel:"∦",nsim:"≁",nsime:"≄",nsimeq:"≄",nsmid:"∤",nspar:"∦",nsqsube:"⋢",nsqsupe:"⋣",nsub:"⊄",nsubE:"⫅̸",nsube:"⊈",nsubset:"⊂⃒",nsubseteq:"⊈",nsubseteqq:"⫅̸",nsucc:"⊁",nsucceq:"⪰̸",nsup:"⊅",nsupE:"⫆̸",nsupe:"⊉",nsupset:"⊃⃒",nsupseteq:"⊉",nsupseteqq:"⫆̸",ntgl:"≹",Ntilde:"Ñ",ntilde:"ñ",ntlg:"≸",ntriangleleft:"⋪",ntrianglelefteq:"⋬",ntriangleright:"⋫",ntrianglerighteq:"⋭",Nu:"Ν",nu:"ν",num:"#",numero:"№",numsp:" ",nvap:"≍⃒",nVDash:"⊯",nVdash:"⊮",nvDash:"⊭",nvdash:"⊬",nvge:"≥⃒",nvgt:">⃒",nvHarr:"⤄",nvinfin:"⧞",nvlArr:"⤂",nvle:"≤⃒",nvlt:"<⃒",nvltrie:"⊴⃒",nvrArr:"⤃",nvrtrie:"⊵⃒",nvsim:"∼⃒",nwarhk:"⤣",nwArr:"⇖",nwarr:"↖",nwarrow:"↖",nwnear:"⤧",Oacute:"Ó",oacute:"ó",oast:"⊛",ocir:"⊚",Ocirc:"Ô",ocirc:"ô",Ocy:"О",ocy:"о",odash:"⊝",Odblac:"Ő",odblac:"ő",odiv:"⨸",odot:"⊙",odsold:"⦼",OElig:"Œ",oelig:"œ",ofcir:"⦿",Ofr:"𝔒",ofr:"𝔬",ogon:"˛",Ograve:"Ò",ograve:"ò",ogt:"⧁",ohbar:"⦵",ohm:"Ω",oint:"∮",olarr:"↺",olcir:"⦾",olcross:"⦻",oline:"‾",olt:"⧀",Omacr:"Ō",omacr:"ō",Omega:"Ω",omega:"ω",Omicron:"Ο",omicron:"ο",omid:"⦶",ominus:"⊖",Oopf:"𝕆",oopf:"𝕠",opar:"⦷",OpenCurlyDoubleQuote:"“",OpenCurlyQuote:"‘",operp:"⦹",oplus:"⊕",Or:"⩔",or:"∨",orarr:"↻",ord:"⩝",order:"ℴ",orderof:"ℴ",ordf:"ª",ordm:"º",origof:"⊶",oror:"⩖",orslope:"⩗",orv:"⩛",oS:"Ⓢ",Oscr:"𝒪",oscr:"ℴ",Oslash:"Ø",oslash:"ø",osol:"⊘",Otilde:"Õ",otilde:"õ",Otimes:"⨷",otimes:"⊗",otimesas:"⨶",Ouml:"Ö",ouml:"ö",ovbar:"⌽",OverBar:"‾",OverBrace:"⏞",OverBracket:"⎴",OverParenthesis:"⏜",par:"∥",para:"¶",parallel:"∥",parsim:"⫳",parsl:"⫽",part:"∂",PartialD:"∂",Pcy:"П",pcy:"п",percnt:"%",period:".",permil:"‰",perp:"⊥",pertenk:"‱",Pfr:"𝔓",pfr:"𝔭",Phi:"Φ",phi:"φ",phiv:"ϕ",phmmat:"ℳ",phone:"☎",Pi:"Π",pi:"π",pitchfork:"⋔",piv:"ϖ",planck:"ℏ",planckh:"ℎ",plankv:"ℏ",plus:"+",plusacir:"⨣",plusb:"⊞",pluscir:"⨢",plusdo:"∔",plusdu:"⨥",pluse:"⩲",PlusMinus:"±",plusmn:"±",plussim:"⨦",plustwo:"⨧",pm:"±",Poincareplane:"ℌ",pointint:"⨕",Popf:"ℙ",popf:"𝕡",pound:"£",Pr:"⪻",pr:"≺",prap:"⪷",prcue:"≼",prE:"⪳",pre:"⪯",prec:"≺",precapprox:"⪷",preccurlyeq:"≼",Precedes:"≺",PrecedesEqual:"⪯",PrecedesSlantEqual:"≼",PrecedesTilde:"≾",preceq:"⪯",precnapprox:"⪹",precneqq:"⪵",precnsim:"⋨",precsim:"≾",Prime:"″",prime:"′",primes:"ℙ",prnap:"⪹",prnE:"⪵",prnsim:"⋨",prod:"∏",Product:"∏",profalar:"⌮",profline:"⌒",profsurf:"⌓",prop:"∝",Proportion:"∷",Proportional:"∝",propto:"∝",prsim:"≾",prurel:"⊰",Pscr:"𝒫",pscr:"𝓅",Psi:"Ψ",psi:"ψ",puncsp:" ",Qfr:"𝔔",qfr:"𝔮",qint:"⨌",Qopf:"ℚ",qopf:"𝕢",qprime:"⁗",Qscr:"𝒬",qscr:"𝓆",quaternions:"ℍ",quatint:"⨖",quest:"?",questeq:"≟",QUOT:'"',quot:'"',rAarr:"⇛",race:"∽̱",Racute:"Ŕ",racute:"ŕ",radic:"√",raemptyv:"⦳",Rang:"⟫",rang:"⟩",rangd:"⦒",range:"⦥",rangle:"⟩",raquo:"»",Rarr:"↠",rArr:"⇒",rarr:"→",rarrap:"⥵",rarrb:"⇥",rarrbfs:"⤠",rarrc:"⤳",rarrfs:"⤞",rarrhk:"↪",rarrlp:"↬",rarrpl:"⥅",rarrsim:"⥴",Rarrtl:"⤖",rarrtl:"↣",rarrw:"↝",rAtail:"⤜",ratail:"⤚",ratio:"∶",rationals:"ℚ",RBarr:"⤐",rBarr:"⤏",rbarr:"⤍",rbbrk:"❳",rbrace:"}",rbrack:"]",rbrke:"⦌",rbrksld:"⦎",rbrkslu:"⦐",Rcaron:"Ř",rcaron:"ř",Rcedil:"Ŗ",rcedil:"ŗ",rceil:"⌉",rcub:"}",Rcy:"Р",rcy:"р",rdca:"⤷",rdldhar:"⥩",rdquo:"”",rdquor:"”",rdsh:"↳",Re:"ℜ",real:"ℜ",realine:"ℛ",realpart:"ℜ",reals:"ℝ",rect:"▭",REG:"®",reg:"®",ReverseElement:"∋",ReverseEquilibrium:"⇋",ReverseUpEquilibrium:"⥯",rfisht:"⥽",rfloor:"⌋",Rfr:"ℜ",rfr:"𝔯",rHar:"⥤",rhard:"⇁",rharu:"⇀",rharul:"⥬",Rho:"Ρ",rho:"ρ",rhov:"ϱ",RightAngleBracket:"⟩",RightArrow:"→",Rightarrow:"⇒",rightarrow:"→",RightArrowBar:"⇥",RightArrowLeftArrow:"⇄",rightarrowtail:"↣",RightCeiling:"⌉",RightDoubleBracket:"⟧",RightDownTeeVector:"⥝",RightDownVector:"⇂",RightDownVectorBar:"⥕",RightFloor:"⌋",rightharpoondown:"⇁",rightharpoonup:"⇀",rightleftarrows:"⇄",rightleftharpoons:"⇌",rightrightarrows:"⇉",rightsquigarrow:"↝",RightTee:"⊢",RightTeeArrow:"↦",RightTeeVector:"⥛",rightthreetimes:"⋌",RightTriangle:"⊳",RightTriangleBar:"⧐",RightTriangleEqual:"⊵",RightUpDownVector:"⥏",RightUpTeeVector:"⥜",RightUpVector:"↾",RightUpVectorBar:"⥔",RightVector:"⇀",RightVectorBar:"⥓",ring:"˚",risingdotseq:"≓",rlarr:"⇄",rlhar:"⇌",rlm:"‏",rmoust:"⎱",rmoustache:"⎱",rnmid:"⫮",roang:"⟭",roarr:"⇾",robrk:"⟧",ropar:"⦆",Ropf:"ℝ",ropf:"𝕣",roplus:"⨮",rotimes:"⨵",RoundImplies:"⥰",rpar:")",rpargt:"⦔",rppolint:"⨒",rrarr:"⇉",Rrightarrow:"⇛",rsaquo:"›",Rscr:"ℛ",rscr:"𝓇",Rsh:"↱",rsh:"↱",rsqb:"]",rsquo:"’",rsquor:"’",rthree:"⋌",rtimes:"⋊",rtri:"▹",rtrie:"⊵",rtrif:"▸",rtriltri:"⧎",RuleDelayed:"⧴",ruluhar:"⥨",rx:"℞",Sacute:"Ś",sacute:"ś",sbquo:"‚",Sc:"⪼",sc:"≻",scap:"⪸",Scaron:"Š",scaron:"š",sccue:"≽",scE:"⪴",sce:"⪰",Scedil:"Ş",scedil:"ş",Scirc:"Ŝ",scirc:"ŝ",scnap:"⪺",scnE:"⪶",scnsim:"⋩",scpolint:"⨓",scsim:"≿",Scy:"С",scy:"с",sdot:"⋅",sdotb:"⊡",sdote:"⩦",searhk:"⤥",seArr:"⇘",searr:"↘",searrow:"↘",sect:"§",semi:";",seswar:"⤩",setminus:"∖",setmn:"∖",sext:"✶",Sfr:"𝔖",sfr:"𝔰",sfrown:"⌢",sharp:"♯",SHCHcy:"Щ",shchcy:"щ",SHcy:"Ш",shcy:"ш",ShortDownArrow:"↓",ShortLeftArrow:"←",shortmid:"∣",shortparallel:"∥",ShortRightArrow:"→",ShortUpArrow:"↑",shy:"­",Sigma:"Σ",sigma:"σ",sigmaf:"ς",sigmav:"ς",sim:"∼",simdot:"⩪",sime:"≃",simeq:"≃",simg:"⪞",simgE:"⪠",siml:"⪝",simlE:"⪟",simne:"≆",simplus:"⨤",simrarr:"⥲",slarr:"←",SmallCircle:"∘",smallsetminus:"∖",smashp:"⨳",smeparsl:"⧤",smid:"∣",smile:"⌣",smt:"⪪",smte:"⪬",smtes:"⪬︀",SOFTcy:"Ь",softcy:"ь",sol:"/",solb:"⧄",solbar:"⌿",Sopf:"𝕊",sopf:"𝕤",spades:"♠",spadesuit:"♠",spar:"∥",sqcap:"⊓",sqcaps:"⊓︀",sqcup:"⊔",sqcups:"⊔︀",Sqrt:"√",sqsub:"⊏",sqsube:"⊑",sqsubset:"⊏",sqsubseteq:"⊑",sqsup:"⊐",sqsupe:"⊒",sqsupset:"⊐",sqsupseteq:"⊒",squ:"□",Square:"□",square:"□",SquareIntersection:"⊓",SquareSubset:"⊏",SquareSubsetEqual:"⊑",SquareSuperset:"⊐",SquareSupersetEqual:"⊒",SquareUnion:"⊔",squarf:"▪",squf:"▪",srarr:"→",Sscr:"𝒮",sscr:"𝓈",ssetmn:"∖",ssmile:"⌣",sstarf:"⋆",Star:"⋆",star:"☆",starf:"★",straightepsilon:"ϵ",straightphi:"ϕ",strns:"¯",Sub:"⋐",sub:"⊂",subdot:"⪽",subE:"⫅",sube:"⊆",subedot:"⫃",submult:"⫁",subnE:"⫋",subne:"⊊",subplus:"⪿",subrarr:"⥹",Subset:"⋐",subset:"⊂",subseteq:"⊆",subseteqq:"⫅",SubsetEqual:"⊆",subsetneq:"⊊",subsetneqq:"⫋",subsim:"⫇",subsub:"⫕",subsup:"⫓",succ:"≻",succapprox:"⪸",succcurlyeq:"≽",Succeeds:"≻",SucceedsEqual:"⪰",SucceedsSlantEqual:"≽",SucceedsTilde:"≿",succeq:"⪰",succnapprox:"⪺",succneqq:"⪶",succnsim:"⋩",succsim:"≿",SuchThat:"∋",Sum:"∑",sum:"∑",sung:"♪",Sup:"⋑",sup:"⊃",sup1:"¹",sup2:"²",sup3:"³",supdot:"⪾",supdsub:"⫘",supE:"⫆",supe:"⊇",supedot:"⫄",Superset:"⊃",SupersetEqual:"⊇",suphsol:"⟉",suphsub:"⫗",suplarr:"⥻",supmult:"⫂",supnE:"⫌",supne:"⊋",supplus:"⫀",Supset:"⋑",supset:"⊃",supseteq:"⊇",supseteqq:"⫆",supsetneq:"⊋",supsetneqq:"⫌",supsim:"⫈",supsub:"⫔",supsup:"⫖",swarhk:"⤦",swArr:"⇙",swarr:"↙",swarrow:"↙",swnwar:"⤪",szlig:"ß",Tab:"\t",target:"⌖",Tau:"Τ",tau:"τ",tbrk:"⎴",Tcaron:"Ť",tcaron:"ť",Tcedil:"Ţ",tcedil:"ţ",Tcy:"Т",tcy:"т",tdot:"⃛",telrec:"⌕",Tfr:"𝔗",tfr:"𝔱",there4:"∴",Therefore:"∴",therefore:"∴",Theta:"Θ",theta:"θ",thetasym:"ϑ",thetav:"ϑ",thickapprox:"≈",thicksim:"∼",ThickSpace:"  ",thinsp:" ",ThinSpace:" ",thkap:"≈",thksim:"∼",THORN:"Þ",thorn:"þ",Tilde:"∼",tilde:"˜",TildeEqual:"≃",TildeFullEqual:"≅",TildeTilde:"≈",times:"×",timesb:"⊠",timesbar:"⨱",timesd:"⨰",tint:"∭",toea:"⤨",top:"⊤",topbot:"⌶",topcir:"⫱",Topf:"𝕋",topf:"𝕥",topfork:"⫚",tosa:"⤩",tprime:"‴",TRADE:"™",trade:"™",triangle:"▵",triangledown:"▿",triangleleft:"◃",trianglelefteq:"⊴",triangleq:"≜",triangleright:"▹",trianglerighteq:"⊵",tridot:"◬",trie:"≜",triminus:"⨺",TripleDot:"⃛",triplus:"⨹",trisb:"⧍",tritime:"⨻",trpezium:"⏢",Tscr:"𝒯",tscr:"𝓉",TScy:"Ц",tscy:"ц",TSHcy:"Ћ",tshcy:"ћ",Tstrok:"Ŧ",tstrok:"ŧ",twixt:"≬",twoheadleftarrow:"↞",twoheadrightarrow:"↠",Uacute:"Ú",uacute:"ú",Uarr:"↟",uArr:"⇑",uarr:"↑",Uarrocir:"⥉",Ubrcy:"Ў",ubrcy:"ў",Ubreve:"Ŭ",ubreve:"ŭ",Ucirc:"Û",ucirc:"û",Ucy:"У",ucy:"у",udarr:"⇅",Udblac:"Ű",udblac:"ű",udhar:"⥮",ufisht:"⥾",Ufr:"𝔘",ufr:"𝔲",Ugrave:"Ù",ugrave:"ù",uHar:"⥣",uharl:"↿",uharr:"↾",uhblk:"▀",ulcorn:"⌜",ulcorner:"⌜",ulcrop:"⌏",ultri:"◸",Umacr:"Ū",umacr:"ū",uml:"¨",UnderBar:"_",UnderBrace:"⏟",UnderBracket:"⎵",UnderParenthesis:"⏝",Union:"⋃",UnionPlus:"⊎",Uogon:"Ų",uogon:"ų",Uopf:"𝕌",uopf:"𝕦",UpArrow:"↑",Uparrow:"⇑",uparrow:"↑",UpArrowBar:"⤒",UpArrowDownArrow:"⇅",UpDownArrow:"↕",Updownarrow:"⇕",updownarrow:"↕",UpEquilibrium:"⥮",upharpoonleft:"↿",upharpoonright:"↾",uplus:"⊎",UpperLeftArrow:"↖",UpperRightArrow:"↗",Upsi:"ϒ",upsi:"υ",upsih:"ϒ",Upsilon:"Υ",upsilon:"υ",UpTee:"⊥",UpTeeArrow:"↥",upuparrows:"⇈",urcorn:"⌝",urcorner:"⌝",urcrop:"⌎",Uring:"Ů",uring:"ů",urtri:"◹",Uscr:"𝒰",uscr:"𝓊",utdot:"⋰",Utilde:"Ũ",utilde:"ũ",utri:"▵",utrif:"▴",uuarr:"⇈",Uuml:"Ü",uuml:"ü",uwangle:"⦧",vangrt:"⦜",varepsilon:"ϵ",varkappa:"ϰ",varnothing:"∅",varphi:"ϕ",varpi:"ϖ",varpropto:"∝",vArr:"⇕",varr:"↕",varrho:"ϱ",varsigma:"ς",varsubsetneq:"⊊︀",varsubsetneqq:"⫋︀",varsupsetneq:"⊋︀",varsupsetneqq:"⫌︀",vartheta:"ϑ",vartriangleleft:"⊲",vartriangleright:"⊳",Vbar:"⫫",vBar:"⫨",vBarv:"⫩",Vcy:"В",vcy:"в",VDash:"⊫",Vdash:"⊩",vDash:"⊨",vdash:"⊢",Vdashl:"⫦",Vee:"⋁",vee:"∨",veebar:"⊻",veeeq:"≚",vellip:"⋮",Verbar:"‖",verbar:"|",Vert:"‖",vert:"|",VerticalBar:"∣",VerticalLine:"|",VerticalSeparator:"❘",VerticalTilde:"≀",VeryThinSpace:" ",Vfr:"𝔙",vfr:"𝔳",vltri:"⊲",vnsub:"⊂⃒",vnsup:"⊃⃒",Vopf:"𝕍",vopf:"𝕧",vprop:"∝",vrtri:"⊳",Vscr:"𝒱",vscr:"𝓋",vsubnE:"⫋︀",vsubne:"⊊︀",vsupnE:"⫌︀",vsupne:"⊋︀",Vvdash:"⊪",vzigzag:"⦚",Wcirc:"Ŵ",wcirc:"ŵ",wedbar:"⩟",Wedge:"⋀",wedge:"∧",wedgeq:"≙",weierp:"℘",Wfr:"𝔚",wfr:"𝔴",Wopf:"𝕎",wopf:"𝕨",wp:"℘",wr:"≀",wreath:"≀",Wscr:"𝒲",wscr:"𝓌",xcap:"⋂",xcirc:"◯",xcup:"⋃",xdtri:"▽",Xfr:"𝔛",xfr:"𝔵",xhArr:"⟺",xharr:"⟷",Xi:"Ξ",xi:"ξ",xlArr:"⟸",xlarr:"⟵",xmap:"⟼",xnis:"⋻",xodot:"⨀",Xopf:"𝕏",xopf:"𝕩",xoplus:"⨁",xotime:"⨂",xrArr:"⟹",xrarr:"⟶",Xscr:"𝒳",xscr:"𝓍",xsqcup:"⨆",xuplus:"⨄",xutri:"△",xvee:"⋁",xwedge:"⋀",Yacute:"Ý",yacute:"ý",YAcy:"Я",yacy:"я",Ycirc:"Ŷ",ycirc:"ŷ",Ycy:"Ы",ycy:"ы",yen:"¥",Yfr:"𝔜",yfr:"𝔶",YIcy:"Ї",yicy:"ї",Yopf:"𝕐",yopf:"𝕪",Yscr:"𝒴",yscr:"𝓎",YUcy:"Ю",yucy:"ю",Yuml:"Ÿ",yuml:"ÿ",Zacute:"Ź",zacute:"ź",Zcaron:"Ž",zcaron:"ž",Zcy:"З",zcy:"з",Zdot:"Ż",zdot:"ż",zeetrf:"ℨ",ZeroWidthSpace:"​",Zeta:"Ζ",zeta:"ζ",Zfr:"ℨ",zfr:"𝔷",ZHcy:"Ж",zhcy:"ж",zigrarr:"⇝",Zopf:"ℤ",zopf:"𝕫",Zscr:"𝒵",zscr:"𝓏",zwj:"‍",zwnj:"‌"}),t.entityMap=t.HTML_ENTITIES},function(e,t,r){"use strict";var o=r(0),n=r(7),i=r(2),s=o.isHTMLEscapableRawTextElement,a=o.isHTMLMimeType,c=o.isHTMLRawTextElement,l=o.hasOwn,u=o.NAMESPACE,p=i.ParseError,h=i.DOMException;function f(){}f.prototype={parse:function(e,t,r){var i=this.domBuilder;i.startDocument(),v(t,t=Object.create(null)),function(e,t,r,i,s){var c=a(i.mimeType);e.indexOf(n.UNICODE_REPLACEMENT_CHARACTER)>=0&&s.warning("Unicode replacement character detected, source encoding issues?");function u(e){if(e>65535){var t=55296+((e-=65536)>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}function f(e){var t=";"===e[e.length-1]?e:e+";";if(!c&&t!==e)return s.error("EntityRef: expecting ;"),e;var o=n.Reference.exec(t);if(!o||o[0].length!==t.length)return s.error("entity not matching Reference production: "+e),e;var i=t.slice(1,-1);return l(r,i)?r[i]:"#"===i.charAt(0)?u(parseInt(i.substr(1).replace("x","0x"))):(s.error("entity not found:"+e),e)}function v(t){if(t>C){var r=e.substring(C,t).replace(d,f);O&&w(C),i.characters(r,0,t-C),C=t}}function w(t,r){for(;t>=N&&(r=_.exec(e));)R=r.index,N=R+r[0].length,O.lineNumber++;O.columnNumber=t-R+1}var R=0,N=0,_=/.*(?:\r\n?|\n)|.*$/g,O=i.locator,A=[{currentNSMap:t}],x=[],C=0;for(;;){try{var I=e.indexOf("<",C);if(I<0){if(!c&&x.length>0)return s.fatalError("unclosed xml tag(s): "+x.join(", "));if(!e.substring(C).match(/^\s*$/)){var M=i.doc,D=M.createTextNode(e.substr(C));if(M.documentElement)return s.error("Extra content at the end of the document");M.appendChild(D),i.currentElement=D}return}if(I>C){var P=e.substring(C,I);c||0!==x.length||(P=P.replace(new RegExp(n.S_OPT.source,"g"),""))&&s.error("Unexpected content outside root element: '"+P+"'"),v(I)}switch(e.charAt(I+1)){case"/":var L=e.indexOf(">",I+2),k=e.substring(I+2,L>0?L:void 0);if(!k)return s.fatalError("end tag name missing");var q=L>0&&n.reg("^",n.QName_group,n.S_OPT,"$").exec(k);if(!q)return s.fatalError('end tag name contains invalid characters: "'+k+'"');if(!i.currentElement&&!i.doc.documentElement)return;var U=x[x.length-1]||i.currentElement.tagName||i.doc.documentElement.tagName||"";if(U!==q[1]){var F=q[1].toLowerCase();if(!c||U.toLowerCase()!==F)return s.fatalError('Opening and ending tag mismatch: "'+U+'" != "'+k+'"')}var V=A.pop();x.pop();var G=V.localNSMap;if(i.endElement(V.uri,V.localName,U),G)for(var j in G)l(G,j)&&i.endPrefixMapping(j);L++;break;case"?":O&&w(I),L=S(e,I,i,s);break;case"!":O&&w(I),L=b(e,I,i,s,c);break;default:O&&w(I);var H=new T,Y=A[A.length-1].currentNSMap,X=(L=m(e,I,H,Y,f,s,c),H.length);if(H.closed||(c&&o.isHTMLVoidElement(H.tagName)?H.closed=!0:x.push(H.tagName)),O&&X){for(var z=g(O,{}),B=0;B<X;B++){var W=H[B];w(W.offset),W.locator=g(O,{})}i.locator=z,E(H,i,Y)&&A.push(H),i.locator=O}else E(H,i,Y)&&A.push(H);c&&!H.closed?L=y(e,L,H.tagName,f,i):L++}}catch(e){if(e instanceof p)throw e;if(e instanceof h)throw new p(e.name+": "+e.message,i.locator,e);s.error("element parse error: "+e),L=-1}L>C?C=L:v(Math.max(I,C)+1)}}(e,t,r,i,this.errorHandler),i.endDocument()}};var d=/&#?\w+;?/g;function g(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function m(e,t,r,o,n,i,s){function a(e,t,o){return l(r.attributeNames,e)?i.fatalError("Attribute "+e+" redefined"):!s&&t.indexOf("<")>=0?i.fatalError("Unescaped '<' not allowed in attributes values"):void r.addValue(e,t.replace(/[\t\n\r]/g," ").replace(d,n),o)}for(var c,u=++t,p=0;;){var h=e.charAt(u);switch(h){case"=":if(1===p)c=e.slice(t,u),p=3;else{if(2!==p)throw new Error("attribute equal must after attrName");p=3}break;case"'":case'"':if(3===p||1===p){if(1===p&&(i.warning('attribute value must after "="'),c=e.slice(t,u)),t=u+1,!((u=e.indexOf(h,t))>0))throw new Error("attribute value no end '"+h+"' match");a(c,f=e.slice(t,u),t-1),p=5}else{if(4!=p)throw new Error('attribute value must after "="');a(c,f=e.slice(t,u),t),i.warning('attribute "'+c+'" missed start quot('+h+")!!"),t=u+1,p=5}break;case"/":switch(p){case 0:r.setTagName(e.slice(t,u));case 5:case 6:case 7:p=7,r.closed=!0;case 4:case 1:break;case 2:r.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return i.error("unexpected end of input"),0==p&&r.setTagName(e.slice(t,u)),u;case">":switch(p){case 0:r.setTagName(e.slice(t,u));case 5:case 6:case 7:break;case 4:case 1:"/"===(f=e.slice(t,u)).slice(-1)&&(r.closed=!0,f=f.slice(0,-1));case 2:2===p&&(f=c),4==p?(i.warning('attribute "'+f+'" missed quot(")!'),a(c,f,t)):(s||i.warning('attribute "'+f+'" missed value!! "'+f+'" instead!!'),a(f,f,t));break;case 3:if(!s)return i.fatalError("AttValue: ' or \" expected")}return u;case"":h=" ";default:if(h<=" ")switch(p){case 0:r.setTagName(e.slice(t,u)),p=6;break;case 1:c=e.slice(t,u),p=2;break;case 4:var f=e.slice(t,u);i.warning('attribute "'+f+'" missed quot(")!!'),a(c,f,t);case 5:p=6}else switch(p){case 2:s||i.warning('attribute "'+c+'" missed value!! "'+c+'" instead2!!'),a(c,c,t),t=u,p=1;break;case 5:i.warning('attribute space is required"'+c+'"!!');case 6:p=1,t=u;break;case 3:p=4,t=u;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function E(e,t,r){for(var o=e.tagName,n=null,i=e.length;i--;){var s=e[i],a=s.qName,c=s.value;if((d=a.indexOf(":"))>0)var p=s.prefix=a.slice(0,d),h=a.slice(d+1),f="xmlns"===p&&h;else h=a,p=null,f="xmlns"===a&&"";s.localName=h,!1!==f&&(null==n&&(n=Object.create(null),v(r,r=Object.create(null))),r[f]=n[f]=c,s.uri=u.XMLNS,t.startPrefixMapping(f,c))}for(i=e.length;i--;)(s=e[i]).prefix&&("xml"===s.prefix&&(s.uri=u.XML),"xmlns"!==s.prefix&&(s.uri=r[s.prefix]));var d;(d=o.indexOf(":"))>0?(p=e.prefix=o.slice(0,d),h=e.localName=o.slice(d+1)):(p=null,h=e.localName=o);var g=e.uri=r[p||""];if(t.startElement(g,h,o,e),!e.closed)return e.currentNSMap=r,e.localNSMap=n,!0;if(t.endElement(g,h,o),n)for(p in n)l(n,p)&&t.endPrefixMapping(p)}function y(e,t,r,o,n){var i=s(r);if(i||c(r)){var a=e.indexOf("</"+r+">",t),l=e.substring(t+1,a);return i&&(l=l.replace(d,o)),n.characters(l,0,l.length),a}return t+1}function v(e,t){for(var r in e)l(e,r)&&(t[r]=e[r])}function w(e,t){var r=t;function o(t){return t=t||0,e.charAt(r+t)}function i(e){r+=e=e||1}function s(){return e.substring(r)}return{char:o,getIndex:function(){return r},getMatch:function(e){var t=n.reg("^",e).exec(s());return t?(i(t[0].length),t[0]):null},getSource:function(){return e},skip:i,skipBlanks:function(){for(var t=0;r<e.length;){var n=o();if(" "!==n&&"\n"!==n&&"\t"!==n&&"\r"!==n)return t;t++,i()}return-1},substringFromIndex:s,substringStartsWith:function(t){return e.substring(r,r+t.length)===t}}}function b(e,t,r,o,i){var s=w(e,t);switch(s.char(2)){case"-":var a=s.getMatch(n.Comment);return a?(r.comment(a,n.COMMENT_START.length,a.length-n.COMMENT_START.length-n.COMMENT_END.length),s.getIndex()):o.fatalError("comment is not well-formed at position "+s.getIndex());case"[":var c=s.getMatch(n.CDSect);return c?i||r.currentElement?(r.startCDATA(),r.characters(c,n.CDATA_START.length,c.length-n.CDATA_START.length-n.CDATA_END.length),r.endCDATA(),s.getIndex()):o.fatalError("CDATA outside of element"):o.fatalError("Invalid CDATA starting at position "+t);case"D":if(r.doc&&r.doc.documentElement)return o.fatalError("Doctype not allowed inside or after documentElement at position "+s.getIndex());if(!s.substringStartsWith(n.DOCTYPE_DECL_START))return o.fatalError("Expected "+n.DOCTYPE_DECL_START+" at position "+s.getIndex());if(s.skip(n.DOCTYPE_DECL_START.length),s.skipBlanks()<1)return o.fatalError("Expected whitespace after "+n.DOCTYPE_DECL_START+" at position "+s.getIndex());var l={name:void 0,publicId:void 0,systemId:void 0,internalSubset:void 0};if(l.name=s.getMatch(n.Name),!l.name)return o.fatalError("doctype name missing or contains unexpected characters at position "+s.getIndex());if(s.skipBlanks(),s.substringStartsWith(n.PUBLIC)||s.substringStartsWith(n.SYSTEM)){var u=n.ExternalID_match.exec(s.substringFromIndex());if(!u)return o.fatalError("doctype external id is not well-formed at position "+s.getIndex());void 0!==u.groups.SystemLiteralOnly?l.systemId=u.groups.SystemLiteralOnly:(l.systemId=u.groups.SystemLiteral,l.publicId=u.groups.PubidLiteral),s.skip(u[0].length)}return s.skipBlanks(),l.internalSubset=function(e,t){function r(e,t){var r=n.PI.exec(e.substringFromIndex());return r?"xml"===r[1].toLowerCase()?t.fatalError("xml declaration is only allowed at the start of the document, but found at position "+e.getIndex()):(e.skip(r[0].length),r[0]):t.fatalError("processing instruction is not well-formed at position "+e.getIndex())}var o=e.getSource();if("["===e.char()){e.skip(1);for(var i=e.getIndex();e.getIndex()<o.length;){if(e.skipBlanks(),"]"===e.char()){var s=o.substring(i,e.getIndex());return e.skip(1),s}var a=null;if("<"===e.char()&&"!"===e.char(1))switch(e.char(2)){case"E":"L"===e.char(3)?a=e.getMatch(n.elementdecl):"N"===e.char(3)&&(a=e.getMatch(n.EntityDecl));break;case"A":a=e.getMatch(n.AttlistDecl);break;case"N":a=e.getMatch(n.NotationDecl);break;case"-":a=e.getMatch(n.Comment)}else if("<"===e.char()&&"?"===e.char(1))a=r(e,t);else{if("%"!==e.char())return t.fatalError("Error detected in Markup declaration");a=e.getMatch(n.PEReference)}if(!a)return t.fatalError("Error in internal subset at position "+e.getIndex())}return t.fatalError("doctype internal subset is not well-formed, missing ]")}}(s,o),s.skipBlanks(),">"!==s.char()?o.fatalError("doctype not terminated with > at position "+s.getIndex()):(s.skip(1),r.startDTD(l.name,l.publicId,l.systemId,l.internalSubset),r.endDTD(),s.getIndex());default:return o.fatalError('Not well-formed XML starting with "<!" at position '+t)}}function S(e,t,r,o){var i=e.substring(t).match(n.PI);if(!i)return o.fatalError("Invalid processing instruction starting at position "+t);if("xml"===i[1].toLowerCase()){if(t>0)return o.fatalError("processing instruction at position "+t+" is an xml declaration which is only at the start of the document");if(!n.XMLDecl.test(e.substring(t)))return o.fatalError("xml declaration is not well-formed")}return r.processingInstruction(i[1],i[2]),t+i[0].length}function T(){this.attributeNames=Object.create(null)}T.prototype={setTagName:function(e){if(!n.QName_exact.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,r){if(!n.QName_exact.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=f,t.parseUtils=w,t.parseDoctypeCommentOrCData=b},function(e,t,r){"use strict";r.r(t),r.d(t,"servicesVersion",(function(){return et})),r.d(t,"servicesDate",(function(){return tt}));var o=r(3),n={getLogger:function(e){if(void 0===t)var t={env:{VERBOSE:!1}};t.env.VERBOSE?o.enableAll():o.disableAll();var r=e||"default";return o.getLogger(r)}},i={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(e,t){if(0===Object.keys(arguments).length)return"Message indefined !";var r=Array.prototype.slice.call(arguments),o=r.shift(),n=r,i=this[o];try{i=Array.isArray(n)&&n.length>0?i.replace("%var%",n.join(" - ")):i.replace("%var%","%var% (not specified)")}catch(e){}return i}},s=i,a={normalyzeParameters:function(e){var t=null;if(e){var r=[];for(var o in e)if(e.hasOwnProperty(o)){var n=e[o];n||(n=""),r.push(o+"="+n)}t=r.join("&")}return t},normalyzeUrl:function(e,t,r){var o=e;if(e){if(e.split("?").length-1>=2){var n=e.search(/\?/)+1;o=e.substring(0,n)+e.slice(n).replace(/\?/g,"&")}var i=e.indexOf("?");-1===i&&(o+="?"),-1!==i&&i!==e.length-1&&(o+="&")}return t&&(o+="string"==typeof t?t=t.replace("?",""):this.normalyzeParameters(t)),r&&(o=encodeURIComponent(o)),o},indent:function(e,t){return new Array((e||0)+1).join("\t")+t}},c=r(8),l=r.n(c);function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}var p,h={call:function(e){var t=n.getLogger("XHR");if(t.trace("[XHR::call()]"),l.a.polyfill(),!e.url)throw new Error("missing parameter : url is not defined !");if(!e.method)throw new Error("missing parameter : method is not defined !");e.format||(e.format="text");var r={};switch(r.url=e.url,r.data=e.data?e.data:null,r.method=e.method,r.timeOut=e.timeOut||0,r.scope=e.scope||this,r.proxy=e.proxy||null,r.content=e.content||null,r.headers=e.headers||{referer:"http://localhost"},e.method){case"DELETE":case"GET":break;case"PUT":case"POST":r.content=e.content?e.content:"application/x-www-form-urlencoded",r.headers=e.headers?e.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(e.format){case"text":this.__call(r).then((function(r){t.trace(r),e.onResponse.call(this,r)})).catch((function(t){e.onFailure.call(this,t)}));break;case"json":this.__callJSON(r).then((function(r){t.trace(r),e.onResponse.call(this,r)})).catch((function(t){e.onFailure.call(this,t)}));break;case"xml":this.__callXML(r).then((function(r){t.trace(r),e.onResponse.call(this,r)})).catch((function(t){e.onFailure.call(this,t)}));break;default:throw new Error("This output Format is not yet supported !")}},__call:function(e){var t=n.getLogger("XHR");return t.trace("[XHR::__call()]"),new Promise((function(o,n){var i="POST"===e.method||"PUT"===e.method?1:0;e.data&&("object"===u(e.data)&&Object.keys(e.data).length||"string"==typeof e.data&&e.data.length)&&!i&&(e.url=a.normalyzeUrl(e.url,e.data)),t.trace("URL = ",e.url);var s=null;if("undefined"==typeof window){var c=r(4),l={headers:{Referer:"https://localhost"}};return e.data&&"string"==typeof e.data&&i&&(l={method:e.method,body:e.data,headers:{"Content-Type":e.content,Referer:"https://localhost"}}),c(e.url,l).then((function(e){if(e.ok)o(e.text());else{var t="Errors Occured on Http Request (status : '"+e.statusText+"' | url : '"+e.url+"')",r=e.status;n({message:t,status:r})}})).catch((function(e){n({message:e,status:-1})}))}if(window.XMLHttpRequest){t.trace("XMLHttpRequest"),(s=new XMLHttpRequest).open(e.method,e.url,!0),s.overrideMimeType=e.content;var p=null;e.timeOut>0&&(t.trace("XHR - TimeOut actif !"),p=window.setTimeout((function(){n({message:"TimeOut Occured on Http Request with XMLHttpRequest !",status:-1})}),e.timeOut)),i&&(t.trace("data = ",e.data),s.setRequestHeader("Content-type",e.content)),s.onerror=function(e){console.log(e),n(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},s.ontimeout=function(e){console.log(e),n(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},s.onreadystatechange=function(e){if(4===s.readyState)if(200===s.status)window.clearTimeout(p),o(s.response);else{var t="Errors Occured on Http Request (status : '"+e.target.statusText+"' | url : '"+e.target.responseURL+"' | response : '"+e.target.response+"')",r=e.target.status;n({message:t,status:r})}};var h=e.data&&i?e.data:null;s.send(h)}else{if(!window.XDomainRequest)throw new Error("CORS not supported");t.trace("XDomainRequest"),(s=new XDomainRequest).open(e.method,e.url),s.overrideMimeType=e.content,e.timeOut>0&&(s.timeout=e.timeout,t.trace("XHR - TimeOut actif !")),i&&s.setRequestHeader("Content-type",e.content),s.onerror=function(){n(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},s.ontimeout=function(){n(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},s.onload=function(e){if(200===s.status)o(s.responseText);else{var t="Errors Occured on Http Request (status : '"+e.target.statusText+"' | url : '"+e.target.responseURL+"')",r=e.target.status;n({message:t,status:r})}};var f=e.data&&i?e.data:null;s.send(f)}}))},__callJSON:function(e){return this.__call(e).then(JSON.parse).catch((function(t){console.log("_callJSON failed on : ",e.url,t)}))},__callXML:function(e){return this.__call(e).then((function(e){var t;"undefined"==typeof window?t=(new(0,r(5).DOMParser)).parseFromString(e,"text/xml"):window.DOMParser?t=(new window.DOMParser).parseFromString(e,"text/xml"):((t=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(e));return t})).catch((function(t){console.log("__callXML failed on : ",e.url,t)}))}},f={uuid:(p=Math.floor(Date.now()),function(){return p++}),call:function(e){var t=n.getLogger("JSONP");if(t.trace("[JSONP::call ()]"),!e)throw t.error("missing parameter : options !"),new Error("missing parameter : options !");if(!e.url)throw t.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(e.timeOut||(t.info("setting 'options.timeOut' default value"),e.timeOut=0),!e.onResponse)throw t.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var r="string"==typeof e.callbackSuffix?e.callbackSuffix:this.uuid(),o=!1,i=!1,s=e.url.indexOf("callback=");if(-1!==s){o=!0;var a=e.url.indexOf("&",s);-1===a&&(a=e.url.length);var c=e.url.substring(s+9,a);c&&(i=!0,e.callbackName=c,t.info("setting 'options.callbackName' value ("+e.callbackName+") from 'options.url' parameter"))}if(!o){var l=e.url.indexOf("?");-1===l?e.url=e.url+"?callback=":l===e.url.length?e.url=e.url+"callback=":e.url=e.url+"&callback=",t.info("setting callback default key in 'options.url' : "+e.url)}var u=!!e.callbackName||i;if(i||(e.callbackName||(t.info("setting 'options.callbackName' default value"),e.callbackName="callback",(r||""===r)&&(e.callbackName+=r)),e.url=e.url.replace("callback=","callback="+e.callbackName),t.info("setting callback function name in 'options.url' : "+e.url)),e.onTimeOut||(t.info("setting 'options.onTimeOut' default value"),e.onTimeOut=function(){console.log("TimeOut while invoking url : "+e.url)}),!u){var p=this,h=null;e.timeOut>0&&(h=window.setTimeout((function(){window[e.callbackName]=function(){},e.onTimeOut(),p._deleteScript(r)}),e.timeOut)),window[e.callbackName]=function(t){window.clearTimeout(h),e.onResponse(t),p._deleteScript(r)}}this._createScript(r,e.url)},_createScript:function(e,t){var r,o=document.getElementById("results"+e);(r=document.createElement("script")).setAttribute("type","text/javascript"),r.setAttribute("src",t),r.setAttribute("charset","UTF-8"),r.setAttribute("id","results"+e),r.setAttribute("async","true");var n=document.documentElement||document.getElementsByTagName("head")[0];null===o?n.appendChild(r):n.replaceChild(r,o)},_deleteScript:function(e){var t=document.getElementById("results"+e);if(t){var r=t.parentNode||document.documentElement;if(!r)return;r.removeChild(t)}}},d={send:function(e){var t=e||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if("undefined"!=typeof window||"JSONP"!==e.protocol){if("XHR"===e.protocol||"json"===e.format?t.wrap=!1:"JSONP"===e.protocol&&"xml"===e.format&&(t.wrap=!0),t.callback=null,t.output=t.wrap?"json":null,t.wrap){var r={};r.output=t.output,r.callback=t.callback,delete r.callback,t.url=a.normalyzeUrl(e.url,r)}switch(t.protocol){case"XHR":"GET"===e.method&&e.nocache&&(t.url=a.normalyzeUrl(t.url,{t:(new Date).getTime()})),h.call(t);break;case"JSONP":t.data&&(t.url=a.normalyzeUrl(t.url,t.data)),f.call(t);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}else console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS")}};function g(e){if(!(this instanceof g))throw new TypeError("ErrorService constructor cannot be called as a function.");var t=e;"string"==typeof e||e instanceof String?(this.message=e,this.status=-1,this.type=g.TYPE_UNKERR):(this.message=t.message||"undefined!?",this.type=t.type,this.status=t.status||-1),this.name="ErrorService",this.stack=(new Error).stack}g.TYPE_SRVERR="SERVICE_ERROR",g.TYPE_USEERR="USAGE_ERROR",g.TYPE_UNKERR="UNKNOWN_ERROR",g.prototype=Object.create(Error.prototype,{constructor:{value:g,writable:!0,configurable:!0}});var m=g,E=r(1);function y(e){if(!(this instanceof y))throw new TypeError(s.getMessage("CLASS_CONSTRUCTOR"));for(var t in this.logger=n.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(e){console.log("onSuccess - la reponse est la suivante : ",e)},onFailure:function(e){200!==e.status&&e.status?console.log("onFailure - Erreur (",e.status,") : ",e.message):console.log("onFailure : ",e.message)}},e)e.hasOwnProperty(t)&&(this.options[t]=e[t]);if(this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(e){console.log("onSuccess - la réponse brute du service est la suivante : ",e)}),!!(null===this.options.onSuccess||"function"!=typeof this.options.onSuccess))throw new Error(s.getMessage("PARAM_MISSING","onSuccess()"));switch(this.options.httpMethod="string"==typeof e.httpMethod?e.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(s.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(s.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol="string"==typeof e.protocol?e.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(s.getMessage("PARAM_UNKNOWN","protocol"))}if("undefined"==typeof window&&"JSONP"===this.options.protocol)throw new Error(s.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));"JSONP"===this.options.protocol&&(this.options.httpMethod="GET"),this.options.nocache=e.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}y.prototype={constructor:y,call:function(){this.logger.trace("CommonService::call ()");var e=this;function t(t){this.logger.trace("CommonService::onBuildRequest : ",t),this.callService.call(e,n,r)}function r(t){this.logger.trace("CommonService::onCallService : ",t),this.analyzeResponse.call(e,n,o)}function o(e){if(this.logger.trace("CommonService::onAnalyzeResponse : ",e),!e)return n.call(this,new m("Analyse de la reponse en échec !?"));this.options.onSuccess.call(this,e)}function n(e){this.logger.trace("CommonService::onError()");var t=e;t instanceof m||(t=new m(e.message)),this.options.onFailure.call(this,t)}(function(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(e,n,t)}).call(e)},buildRequest:function(e,t){this.logger.error("overwritten method !"),e&&e.call(this,"This method must be overwritten !"),t.call(this,"This method must be overwritten !")},callService:function(e,t){var r=null,o=this.request,n=!(!this.options.proxyURL||"XHR"!==this.options.protocol),i={"gp-access-lib":E.version};this.options.apiKey&&(i.apiKey=this.options.apiKey),this.options.serverUrl=a.normalyzeUrl(this.options.serverUrl,i,!1),n&&("GET"===this.options.httpMethod&&(r=this.options.proxyURL+a.normalyzeUrl(this.options.serverUrl,this.request,!0),o=null),"POST"===this.options.httpMethod&&(r=this.options.proxyURL+a.normalyzeUrl(this.options.serverUrl,null,!0),o=this.request));var s=this,c={url:r||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:"XHR"!==this.options.protocol,callbackSuffix:this.options.callbackSuffix,data:o,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(r){s.logger.trace("callService::onResponse()");var o=null;if("XHR"===s.options.protocol&&(s.logger.trace("Response XHR",r),o=r),"JSONP"===s.options.protocol){if(s.logger.trace("Response JSON",r),!r)return void e.call(s,new m("Le contenu de la reponse est vide !?"));if(r.http){if(200!==r.http.status)return void e.call(s,new m({status:r.http.status,message:r.http.error,type:m.TYPE_SRVERR}));o=r.xml,s.options.rawResponse&&(o=r)}else o=r}if("function"==typeof s.options.onBeforeParse){var n=s.options.onBeforeParse(o);"string"==typeof n&&(o=n)}s.response=o,t.call(s,o)},onFailure:function(t){s.logger.trace("callService::onFailure()"),t.type=m.TYPE_SRVERR,e.call(s,new m(t))},onTimeOut:function(){s.logger.trace("callService::onTimeOut()"),e.call(s,new m("TimeOut!"))}};d.send(c)},analyzeResponse:function(e,t){this.logger.error("overwritten method !"),e&&e.call(this,"This method must be overwritten !"),t.call(this,"This method must be overwritten !")}};var v=y,w={ssl:!0,newUrl:function(e){return(!1===w.ssl?"http://":"https://")+"data.geopf.fr"+e},Alti:{new_key:{"elevation-json":"/altimetrie/1.0/calcul/alti/rest/elevation.json","elevation-xml":"/altimetrie/1.0/calcul/alti/rest/elevation.xml","profil-json":"/altimetrie/1.0/calcul/alti/rest/elevationLine.json","profil-xml":"/altimetrie/1.0/calcul/alti/rest/elevationLine.xml"},newUrl:function(){return{"elevation-json":w.newUrl(this.new_key["elevation-json"]),"elevation-xml":w.newUrl(this.new_key["elevation-xml"]),"profil-json":w.newUrl(this.new_key["profil-json"]),"profil-xml":w.newUrl(this.new_key["profil-xml"])}}},ProcessIsoCurve:{new_key:"/navigation/isochrone",newUrl:function(){return w.newUrl(this.new_key)}},Config:{_key:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/",url:function(e){Array.isArray(e)||(e=e.split(","));for(var t=[],r=0;r<e.length;r++)t[r]=this._key+e[r]+"Config.json";return t}},AutoComplete:{new_key:"/geocodage/completion",newUrl:function(){return w.newUrl(this.new_key)}},ReverseGeocode:{new_key:"/geocodage/reverse",newUrl:function(){return w.newUrl(this.new_key)}},Geocode:{new_key:"/geocodage/search",newUrl:function(){return w.newUrl(this.new_key)}},Route:{new_key:"/navigation/itineraire",newUrl:function(){return w.newUrl(this.new_key)}}},b=w;function S(){if(!(this instanceof S))throw new TypeError("ConfigInterface constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.tileMatrixSets={}}S.prototype={constructor:S,isKeyConfLoaded:function(e){if(e)return!!this.generalOptions.apiKeys[e]},getLayersId:function(e){return this.generalOptions.apiKeys[e]},getLayerId:function(e,t){if(e&&t){var r=null;if(this.layers){var o=this.layers;for(var n in o)if(o.hasOwnProperty(n)){var i=n.split("$");if(e===i[0]&&i[1]){var s=i[1].split(":");if(i[1].split(";")[1]===t.toUpperCase()){r=n;break}if(s[2]===t.toUpperCase()){r=n;break}}}}if(r)return r}},getLayersConf:function(e){var t={},r=this.getLayersId(e);if(r)for(var o=0;o<r.length;o++){var n=r[o];t[n]=this.layers[n]}return t},getLayerConf:function(e){if(this.layers)return this.layers[e]},getLayerParams:function(e,t){var r={};if(("WMS"===t||0!==Object.keys(this.tileMatrixSets).length)&&0!==Object.keys(this.layers).length){var o=this.getLayerId(e,t);if(o){var n=this.getLayerConf(o),i=this.getLayerKey(o);if(0===i.length)return;for(var s=0;s<i.length;s++)n.serviceParams.serverUrl[i[s]]&&(r.url=n.serviceParams.serverUrl[i[s]]);if("WFS"!==t){/\/v\//.test(r.url)?r.styles=" ":r.styles=n.styles[0].name}if(r.version=n.serviceParams.version,r.format=n.formats&&n.formats.length?n.formats[0].name:"",r.projection=n.defaultProjection,r.minScale=n.globalConstraint.minScaleDenominator,r.maxScale=n.globalConstraint.maxScaleDenominator,r.extent=n.globalConstraint.bbox,r.legends=n.legends,r.title=n.title,r.description=n.description,"WMS"===t&&(r.metadata=n.metadata),n.wmtsOptions){r.tileMatrixSetLimits=n.wmtsOptions.tileMatrixSetLimits;var a=n.wmtsOptions.tileMatrixSetLink;if(a){r.TMSLink=a;var c=this.getTMSConf(a);r.matrixIds=Object.keys(c.tileMatrices),r.tileMatrices=c.tileMatrices,r.nativeResolutions=c.nativeResolutions||this.getTMSConf("PM").nativeResolutions}}}}return r},getLayerKey:function(e){var t=[];if(this.generalOptions&&this.generalOptions.apiKeys&&0!==Object.keys(this.generalOptions.apiKeys).length){var r=this.generalOptions.apiKeys;for(var o in r){r[o].forEach((function(r){r===e&&t.push(o)}))}}return t},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(e){if(this.tileMatrixSets)return this.tileMatrixSets[e]},getGlobalConstraints:function(e){var t={};if(e){var r=this.getLayerConf(e);t.projection=r.defaultProjection,t.minScale=r.globalConstraint.minScaleDenominator,t.maxScale=r.globalConstraint.maxScaleDenominator,t.extent=r.globalConstraint.bbox}return t}};var T=S;function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=R(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=R(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==R(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e){if(!(this instanceof A))throw new TypeError(s.getMessage("CLASS_CONSTRUCTOR","Config"));if(this.CLASSNAME="Config",this.logger=n.getLogger("Gp.Config"),this.logger.trace("[Constructeur Config (options)]"),!!(null===e.onSuccess||"function"!=typeof e.onSuccess))throw new Error(s.getMessage("PARAM_MISSING","onSuccess()"));e.apiKey||e.customConfigFile||(e.apiKey="full"),this.options={},this.options.onSuccess=e.onSuccess,this.options.onFailure=e.onFailure,this.options.sync=e.sync||!1,this.options.listConfigUrls=e.customConfigFile?[e.customConfigFile]:Array.isArray(e.apiKey)?b.Config.url(e.apiKey):b.Config.url(e.apiKey.split(","))}A.prototype=Object.create(v.prototype,{}),A.prototype.constructor=A,A.prototype.buildRequest=function(e,t){this.listConfigUrls=this.options.listConfigUrls,this.listConfigUrls?t.call(this,this.listConfigUrls):e.call(this,new Error("url by default not found !"))},A.prototype.callService=function(e,t){this.options.sync?C.call(this,e,t):x.call(this,e,t)};var x=function(e,t){var o=this;this.listConfigResults=[];var n=null;if("undefined"==typeof window){var i=r(4);n=i}else n=window.fetch;for(var s=function(e){return n(e,{credentials:"same-origin"}).then((function(e){if(e.ok)return e.json().then((function(e){return e})).catch((function(e){throw new Error("Exception Json : "+e)}));throw new Error("Exception HTTP : "+e.status+" (status code) !")})).catch((function(e){return new Promise((function(t,r){r(e)}))}))},a=[],c=0;c<this.listConfigUrls.length;c++){var l=this.listConfigUrls[c];a.push(s(l))}Promise.all(a).then((function(e){if(!e)throw new Error("results config empty !?");e.forEach((function(e){o.listConfigResults.push(e)}))})).then((function(){t.call(o,o.listConfigResults)})).catch((function(t){e.call(o,t)}))},C=function(e,t){this.listConfigResults=[];for(var r=0;r<this.listConfigUrls.length;r++){var o=this.listConfigUrls[r],n=new XMLHttpRequest;if(n.open("GET",o,!1),n.send(null),200===n.status){var i=JSON.parse(n.responseText);this.listConfigResults.push(i)}}0!==this.listConfigResults.length?t.call(this,this.listConfigResults):e.call(this,new Error("..."))};A.prototype.analyzeResponse=function(e,t){var r=function(e){for(var t={},r={},o={},n=0;n<e.length;n++){if(!e[n].generalOptions||!e[n].layers)return;r=_(_({},r),e[n].generalOptions.apiKeys),t=_(_({},t),e[n].layers),o=_(_({},o),e[n].tileMatrixSets)}return{generalOptions:{apiKeys:r},layers:t,tileMatrixSets:o}}(this.listConfigResults);if(r){var o=new T;Object.assign(o,r);var n="undefined"!=typeof window?window:{};if(n.Gp||(n.Gp={}),n.Gp.Config)for(var i in Object.assign(n.Gp.Config,o),o)n.Gp.Config[i]=o[i];else n.Gp.Config=o;t.call(this,n.Gp.Config)}else e.call(this,new Error("configuration structure not conforme !"))};var I=A;function M(e){if(!(this instanceof M))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=n.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=e||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json",this.resource=this.options.resource,this.measures=this.options.measures||!1}M.CLASSNAME="AltiRequest",M.prototype={constructor:M,setPositions:function(e){for(var t=[],r=0;r<e.length;r++){var o=e[r];o.lon&&o.lat&&t.push(o)}this.positions=t},getPositions:function(e){if(!e)return this.positions;var t=this.positions.length-1;return e>t||e<t?(this.logger.warn("index out of range !"),this.positions):this.positions[e]},addPositions:function(e){for(var t=0;t<e.length;t++){var r=e[t];r.lon&&r.lat&&this.positions.push(e[t])}},getLon:function(){for(var e=[],t=0;t<this.positions.length;t++)e.push(this.positions[t].lon);return this.logger.trace(e),e.join(this.delimiter)},getLat:function(){for(var e=[],t=0;t<this.positions.length;t++)e.push(this.positions[t].lat);return this.logger.trace(e),e.join(this.delimiter)}},M.prototype.getData=function(){var e=[];return e.push({k:"lon",v:this.getLon()}),e.push({k:"lat",v:this.getLat()}),e.push({k:"delimiter",v:this.delimiter}),e.push({k:"indent",v:this.indent}),e.push({k:"crs",v:this.crs}),e.push({k:"format",v:this.format}),e};var D=M;function P(e){if(!(this instanceof P))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",D.apply(this,arguments),this.logger=n.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}P.prototype=Object.create(D.prototype,{zonly:{get:function(){return this._zonly},set:function(e){this._zonly=e}}}),P.prototype.constructor=P,P.prototype.getData=function(){var e=[];return e.push({k:"lon",v:this.getLon()}),e.push({k:"lat",v:this.getLat()}),e.push({k:"indent",v:this.indent}),e.push({k:"crs",v:this.crs}),e.push({k:"zonly",v:this.zonly}),e.push({k:"format",v:this.format}),e.push({k:"resource",v:this.resource}),e};var L=P;function k(e){if(!(this instanceof k))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",D.apply(this,arguments),this.logger=n.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}k.prototype=Object.create(D.prototype,{sampling:{get:function(){return this._sampling},set:function(e){this._sampling=e}}}),k.prototype.constructor=k,k.prototype.getData=function(){var e=[];return e.push({k:"lon",v:this.getLon()}),e.push({k:"lat",v:this.getLat()}),e.push({k:"indent",v:this.indent}),e.push({k:"crs",v:this.crs}),e.push({k:"sampling",v:this.sampling}),e.push({k:"format",v:this.format}),e.push({k:"resource",v:this.resource}),e};var q=k;function U(e){if(this.logger=n.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof U))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=e||{},!this.options)throw new Error(s.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(s.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new L(this.options.param);break;case"Profil":this.DataObject=new q(this.options.param);break;default:throw new Error(s.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}U.prototype={requestString:null,constructor:U,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'&resource=__RESOURCE__&measures=__MEASURES__",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:"lon=__LON__\nlat=__LAT__\nindent=__INDENT__\ncrs='__CRS__'\nresource='__RESOURCE__'\nmeasures='__MEASURES__'\n",input:{point:"zonly=__ZONLY__\n",profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var e="";return"POST"===this.method?e=this.template.post.value:"GET"===this.method&&(e=this.template.get.value),e=(e=(e=(e=(e=(e=e.replace(/__LON__/g,this.DataObject.getLon())).replace(/__LAT__/g,this.DataObject.getLat())).replace(/__INDENT__/g,this.DataObject.indent)).replace(/__CRS__/g,this.DataObject.crs)).replace(/__RESOURCE__/g,this.DataObject.resource)).replace(/__MEASURES__/g,this.DataObject.measures),e+=this.__addDataInputs(),this.logger.trace("traduction tmpl",e),this.requestString=e,this.requestString},__addDataInputs:function(){var e;if(this.logger.trace("AltiRequestREST::addDataInput ()"),"POST"===this.method)e=this.template.post;else{if("GET"!==this.method)throw new Error("No other HTTP method supported by the service !");e=this.template.get}if("AltiElevationRequest"===this.DataObject.CLASSNAME)return e.input.point.replace(/__ZONLY__/g,this.DataObject.zonly.toString());if("AltiProfilRequest"===this.DataObject.CLASSNAME)return e.input.profil.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};var F=U;function V(e){if(this.logger=n.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof V))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=e||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}V.prototype={requestString:null,constructor:V,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=\x3c!-- __DATAINPUTS__ --\x3e",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs>\x3c!-- __DATAINPUTS__ --\x3e</wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){return['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'].join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var e="";if("POST"===this.method)e=this.template.post.value;else{if("GET"!==this.method)return this.logger.error("No other method supported by the service !"),!1;e=this.template.get.value}return e=(e=(e=(e=(e=e.replace(/__SERVICE__/g,this.paramservice)).replace(/__VERSION__/g,this.paramversion)).replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput)).replace(/__IDENTIFIER__/g,this.paramidentifier)).replace(/__REQUEST__/g,this.paramrequest),"POST"===this.method&&(e=(e=e.replace(/__NAMESPACE__/g,this.namespaceByDefault)).replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),(e=e.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()))?(this.requestString=e,this.logger.trace("traduction tmpl",e),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var e,t="GET"===this.method?this.template.get.input:this.template.post.input,r="GET"===this.method?";":"",o="",n=this,i=this.DataObject.getData(),s=0;s<i.length;s++)e=s,r&&(r=e===i.length-1?"":";"),o=o.concat(n.__addDataInput(t,i[e].k,i[e].v),r);return o},__addDataInput:function(e,t,r){var o=e;return o=(o=o.replace(/__KEY__/g,t)).replace(/__DATA__/g,r)},setMethod:function(e){"GET"===e||"POST"===e?this.method=e:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};var G=V,j={build:function(e){if(n.getLogger("AltiRequestWPS").trace(["AltiRequestWPS::build()"]),!e)throw new Error(s.getMessage("PARAM_EMPTY","options"));if(!e.type)throw new Error(s.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var t=null;switch(e.type){case"Elevation":e.wps.identifier="gs:WPSElevation",t=new L(e.param);break;case"Profil":e.wps.identifier="gs:WPSLineElevation",t=new q(e.param);break;default:throw new Error(s.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var r={data:t,method:e.method,param:e.wps},o=new G(r);if(!o.processRequestString())throw new Error("Enable to process request !");return o.requestString}},H={build:function(e){n.getLogger("AltiRequestFactory").trace(["AltiRequestFactory::build()"]);var t=null,r={type:e.sampling?"Profil":"Elevation",method:e.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null,measures:null}};r.param.positions=e.positions,r.param.format=e.outputFormat,r.param.sampling=e.sampling,r.param.zonly=e.zonly,r.param.measures=e.measures,r.param.resource=e.resource;var o=!(null===e.onError||"function"!=typeof e.onError),i=!(null===e.onSuccess||"function"!=typeof e.onSuccess),s=null;switch(e.api){case"REST":var a=new F(r);if(!a.processRequestString()){if(s="Error in process request (rest) !",o)return void e.onError.call(e.scope,new m(s));throw new Error(s)}t=a.requestString;break;case"WPS":if(r.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},!(t=j.build(r))){if(s="Error in process request (wps) !",o)return void e.onError.call(e.scope,new m(s));throw new Error(s)}break;default:if(s="Type of API is not supported by service (REST or WPS) !",o)return void e.onError.call(e.scope,new m(s));throw new Error(s)}return i&&e.onSuccess.call(e.scope,t),t}};function Y(e){if(!(this instanceof Y))throw new TypeError("XML constructor cannot be called as a function.");this.logger=n.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,e&&(e.xmlString&&"string"==typeof e.xmlString&&(this.xmlString=e.xmlString,this.xmlDoc=X(e.xmlString)),e.reader&&this.setReader(e.reader))}function X(e){if("undefined"==typeof window)return(new(0,r(5).DOMParser)).parseFromString(e,"text/xml");var t,o,n="Erreur lors du parsing de la réponse du service : XML non conforme";if(window.ActiveXObject){(o=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,o.loadXML(e);var i=o.parseError;if(i.errorCode)throw i.line&&i.linepos&&(n+="( ligne "+i.line+", colonne "+i.linepos),i.reason&&(n+=":  "+i.reason+")"),new Error(n);return o}if(window.DOMParser){t=new window.DOMParser;try{o=t.parseFromString(e,"text/xml")}catch(e){throw"SyntaxError"===e.message?new Error(n):new Error("Erreur lors du parsing de la réponse du service : "+e.message)}if(o.getElementsByTagName("parsererror").length>0)for(var s=o.getElementsByTagName("parsererror"),a=0;a<s.length;a++){var c=s[a].innerHTML;if(-1===c.indexOf("Huge input lookup"))throw n+="("+c+")",new Error(n)}else if(!o.documentElement)throw new Error(n);return o}throw new Error("Incompatible DOM Parser pour ce navigateur !")}function z(e){var t={};if(e.attributes.length>0){var r=function(e){if(e.attributes.length>0){for(var t={},r=e.attributes,o=0;o<r.length;o++){var n=r[o];t[n.nodeName]=n.nodeValue}return t}}(e);t.attributes=r}if(e.hasChildNodes())for(var o,n={},i=e.childNodes,s=0;s<i.length;s++)if(3===(o=i[s]).nodeType)t.textContent=o.nodeValue;else if(1===o.nodeType)if(n=z(o),t[o.nodeName]){if(!Array.isArray(t[o.nodeName])){var a=t[o.nodeName];t[o.nodeName]=[],t[o.nodeName].push(a)}t[o.nodeName].push(n)}else t[o.nodeName]=n;return t}Y.prototype={constructor:Y,getXMLString:function(){return this.xmlString},setXMLString:function(e){e&&"string"==typeof e&&(this.xmlString=e,this.xmlDoc=X(e))},getReader:function(){return this.reader},setReader:function(e){e&&e.read&&"function"==typeof e.read&&(this.reader=e)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(e){this.xmlDoc=e},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=X(this.xmlString)),this.xmlDoc){var e,t=function(e){var t;9===e.nodeType?t=e.documentElement:1===e.nodeType&&(t=e);return t}(this.xmlDoc);return t?(this.reader&&this.reader.read?e=this.reader.read(t):(e={})[t.nodeName]=z(t),e):{}}}};var B=Y;function W(){if(!(this instanceof W))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}W.prototype={constructor:W};var J=W;function Q(){if(!(this instanceof Q))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}Q.prototype={constructor:Q};var K=Q;function Z(){if(!(this instanceof Z))throw new TypeError("Measure constructor cannot be called as a function.");this.source_name=null,this.source_measure=null,this.z=null,this.acc=null}Z.prototype={constructor:Z};var $=Z,ee={};ee.READERS={elevations:function(e){var t=new J;if(e.hasChildNodes())for(var r,o,n=e.childNodes,i=0;i<n.length;i++)r=n[i],ee.READERS[r.nodeName]&&(o=ee.READERS[r.nodeName](r),t.elevations.push(o));return t},elevation:function(e){var t=new K;if(e.hasChildNodes())for(var r,o=e.childNodes,n=0;n<o.length;n++)r=o[n],ee.READERS[r.nodeName]&&ee.READERS[r.nodeName](r,t);return t},lat:function(e,t){var r=e.firstChild;if(!r||3!==r.nodeType)throw new Error("Erreur dans la lecture de la réponse du service : latitude attendue mais absente");t.lat=parseFloat(r.nodeValue)},lon:function(e,t){var r=e.firstChild;if(!r||3!==r.nodeType)throw new Error("Erreur dans la lecture de la réponse du service : longitude attendue mais absente");t.lon=parseFloat(r.nodeValue)},z:function(e,t){var r=e.firstChild;if(!r||3!==r.nodeType)throw new Error("Erreur dans la lecture de la réponse du service : altitude attendue mais absente");if(!t)return(t=new K).z=parseFloat(r.nodeValue),t;t.z=parseFloat(r.nodeValue)},acc:function(e,t){var r=e.firstChild;if(!r||3!==r.nodeType)throw new Error("Erreur dans la lecture de la réponse du service : précision (acc) attendue mais absente");t.acc=parseFloat(r.nodeValue)},source_name:function(e,t){var r=e.firstChild;if(!r||3!==r.nodeType)throw new Error("Erreur dans la lecture de la réponse du service : source_name attendue mais absente");t.source_name=r.nodeValue},source_measure:function(e,t){var r=e.firstChild;if(!r||3!==r.nodeType)throw new Error("Erreur dans la lecture de la réponse du service : source_measure attendue mais absente");t.source_measure=r.nodeValue},measures:function(e,t){var r;if(t.measures=[],e.hasChildNodes())for(var o,n=e.childNodes,i=0;i<n.length;i++){r=new $,o=n[i].childNodes;for(var s=0;s<o.length;s++){if(!ee.READERS[o[s].nodeName])throw new Error("Erreur dans la lecture de la réponse du service : measures attendues mais absentes");ee.READERS[o[s].nodeName](o[s],r)}t.measures.push(r)}},exceptionreport:function(e){var t={};if(e.hasChildNodes())for(var r,o=e.childNodes,n=0;n<o.length;n++)"Exception"===(r=o[n]).nodeName&&(t.exceptionReport=ee.READERS.exception(r));return t},exception:function(e){var t={},r=e.getAttribute("exceptionCode");r&&(t.exceptionCode=r);var o=e.firstChild;return o&&3===o.nodeType&&(t.exception=o.nodeValue),t},error:function(e){var t={error:{}};if(e.hasChildNodes())for(var r,o=e.childNodes,n=0;n<o.length;n++){var i;1===(r=o[n]).nodeType&&"code"===r.nodeName&&(i=r.firstChild)&&3===i.nodeType&&(t.error.code=i.nodeValue),1===r.nodeType&&"description"===r.nodeName&&(i=r.firstChild)&&3===i.nodeType&&(t.error.description=i.nodeValue)}return t}},ee.read=function(e){if("elevations"===e.nodeName)return ee.READERS.elevations(e);if("ExceptionReport"===e.nodeName)return ee.READERS.exceptionreport(e);if("error"===e.nodeName)return ee.READERS.error(e);throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")};var te=ee;function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}var oe={build:function(e){var t=n.getLogger("AltiResponseFactory");t.trace(["AltiResponseFactory::build()"]);var r=null;if(e.response){if(e.rawResponse)t.trace("analyze response : raw"),r=e.response;else{switch(e.outputFormat){case"xml":t.trace("analyze response : xml");try{var o=new B({reader:te});if("string"==typeof e.response?o.setXMLString(e.response):o.setXMLDoc(e.response),!(r=o.parse()))throw new Error(s.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(t){var i=t.message;return void e.onError.call(e.scope,new m({message:s.getMessage("SERVICE_RESPONSE_EXCEPTION",i),status:200,type:m.TYPE_SRVERR}))}break;case"json":t.trace("analyze response : json"),t.trace("analyze response : ",re(e.response));var a=null;if((a="string"==typeof e.response?JSON.parse(e.response):e.response)&&a.error)return void e.onError.call(e.scope,new m({message:s.getMessage("SERVICE_RESPONSE_EXCEPTION",a.error.description),status:200,type:m.TYPE_SRVERR}));if(a){var c,l=a.elevations,u=new J;if(Array.isArray(l)&&l.length)for(var p=0;p<l.length;p++)c=new K,"object"===re(l[p])?(l[p].lon&&(c.lon=l[p].lon),l[p].lat&&(c.lat=l[p].lat),l[p].z&&(c.z=l[p].z),l[p].acc&&(c.acc=l[p].acc),l[p].measures&&(c.measures=l[p].measures)):"number"==typeof l[p]&&(c.z=l[p]),Array.isArray(u.elevations)&&u.elevations.push(c);r=u}if(!r)return void e.onError.call(e.scope,new m({message:s.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:m.TYPE_UNKERR,status:-1}));break;default:return void e.onError.call(e.scope,new m({message:s.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:m.TYPE_UNKERR,status:-1}))}if(r.exceptionReport)return void e.onError.call(e.scope,new m({message:s.getMessage("SERVICE_RESPONSE_EXCEPTION",r.exceptionReport),type:m.TYPE_SRVERR,status:200}));if(r.error){var h=r.error.description;return void e.onError.call(e.scope,new m({message:s.getMessage("SERVICE_RESPONSE_EXCEPTION",h),type:m.TYPE_SRVERR,status:200}))}}e.onSuccess.call(e.scope,r)}else e.onError.call(e.scope,new m(s.getMessage("SERVICE_RESPONSE_EMPTY")))}};function ne(e){if(!(this instanceof ne))throw new TypeError(s.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",v.apply(this,arguments),this.logger=n.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!e.positions)throw new Error(s.getMessage("PARAM_MISSING","positions"));if(0===e.positions.length)throw new Error(s.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=e.positions,this.options.outputFormat="string"==typeof e.outputFormat?e.outputFormat.toLowerCase():"xml",this.options.resource=e.resource||"ign_rge_alti_wld",this.options.sampling=e.sampling||null,this.options.api="string"==typeof e.api?e.api.toUpperCase():"REST","REST"===this.options.api&&(this.options.httpMethod="GET"),this.options.zonly=e.zonly||!1,this.options.measures=e.measures||!1,!this.options.serverUrl){var t=b.Alti.newUrl(),r=null;switch(this.options.api){case"WPS":r=t.wps;break;case"REST":r=t[(e.sampling?"profil":"elevation")+"-"+this.options.outputFormat];break;default:throw new Error(s.getMessage("PARAM_UNKNOWN","api"))}if(!r)throw new Error("Url by default not found !");this.options.serverUrl=r,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var o=this.options.serverUrl.lastIndexOf(".");if(-1!==o){var i=this.options.serverUrl.substring(o+1);if(i&&i.length<5)switch(this.logger.trace("Server Extension URL : "+i),i.toLowerCase()){case"json":case"xml":this.options.outputFormat=i.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}ne.prototype=Object.create(v.prototype,{}),ne.prototype.constructor=ne,ne.prototype.buildRequest=function(e,t){var r={httpMethod:this.options.httpMethod,onSuccess:function(e){this.request=e,t.call(this,this.request)},onError:e,scope:this,resource:this.options.resource,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly,measures:this.options.measures};H.build(r)},ne.prototype.analyzeResponse=function(e,t){if(this.response){var r={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:e,onSuccess:t,scope:this};oe.build(r)}else e.call(this,new m(s.getMessage("SERVICE_RESPONSE_EMPTY")))};var ie=ne;function se(e){if(!(this instanceof se))throw new TypeError("GeocodeParamREST constructor cannot be called as a function.");if(this.logger=n.getLogger(),this.logger.trace("[Constructeur GeocodeParamREST ()]"),this.options=e||{},!this.options.geocodeMethod||"search"!==this.options.geocodeMethod&&"reverse"!==this.options.geocodeMethod)throw new Error("Error geocodeMethod not valid");this.geocodeMethod=this.options.geocodeMethod,this.query=void 0!==this.options?this.options.query:null,this.searchGeometry=this.options.searchGeometry||null,this.index=this.options.index||null,this.lon=this.options.position&&this.options.position.lon?this.options.position.lon:null,this.lat=this.options.position&&this.options.position.lat?this.options.position.lat:null,this.maxResp=this.options.maxResp||null,this.returnTrueGeometry=this.options.returnTrueGeometry||null,this.filters=this.options.filters||{}}se.CLASSNAME="GeocodeParamREST",se.prototype={constructor:se,getFilters:function(){var e={};for(var t in this.filters)this.filters.hasOwnProperty(t)&&(e[t]=this.filters[t]);return e},getIndex:function(){return void 0===this.index?null:"StreetAddress"===this.index?"address":"CadastralParcel"===this.index?"parcel":"PositionOfInterest"===this.index?"poi":"location"===this.index?"location":this.index},getSearchGeometry:function(){return JSON.stringify(this.searchGeometry)}},se.prototype.getParams=function(){var e=[];"search"===this.geocodeMethod&&e.push({k:"q",v:this.query}),this.index&&e.push({k:"index",v:this.getIndex()}),"reverse"===this.geocodeMethod&&this.searchGeometry&&e.push({k:"searchgeom",v:this.getSearchGeometry()}),this.lon&&this.lat&&(e.push({k:"lon",v:this.lon}),e.push({k:"lat",v:this.lat})),this.maxResp&&e.push({k:"limit",v:this.maxResp}),this.returnTrueGeometry&&e.push({k:"returntruegeometry",v:this.returnTrueGeometry});var t=this.getFilters();for(var r in t)e.push({k:r,v:t[r]});return e};var ae=se;function ce(e){if(this.logger=n.getLogger("GeocodeRequestREST"),this.logger.trace("[Constructeur GeocodeRequestREST ()]"),!(this instanceof ce))throw new TypeError("GeocodeRequestREST constructor cannot be called as a function.");if(!e)throw new Error(s.getMessage("PARAM_EMPTY","options"));this.settings=e}ce.prototype={requestString:null,constructor:ce,processRequestString:function(){for(var e="",t=new ae(this.settings).getParams(),r=0;r<t.length;r++){var o=t[r];e&&(e+="&"),e+=o.k+"="+o.v}if(!this.settings.geocodeMethod||"search"!==this.settings.geocodeMethod&&"reverse"!==this.settings.geocodeMethod)throw new Error("Error geocodeMethod not valid");return this.requestString="?"+e,this.logger.trace(this.requestString),this.requestString}};var le=ce,ue={build:function(e){var t=n.getLogger("GeocodeRequestFactory");t.trace(["GeocodeRequestFactory::build()"]);var r=new le(e||{});if(!r.processRequestString())throw new Error("Error process request (rest) !");var o=r.requestString;return t.trace(o),o}};function pe(){if(!(this instanceof pe))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}pe.prototype={constructor:pe};var he=pe;function fe(){if(!(this instanceof fe))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position=null,this.matchType=null,this.placeAttributes={},this.type=null,this.accuracy=null,this.CLASSNAME="GeocodedLocation"}fe.prototype={constructor:fe};var de=fe;function ge(){if(!(this instanceof ge))throw new TypeError("GeocodeResponseParser constructor cannot be called as a function.")}function me(e,t){var r=new de;if(e.geometry&&"Point"===e.geometry.type&&(r.position={lon:e.geometry.coordinates[0],lat:e.geometry.coordinates[1]}),e.properties){for(var o in e.properties)"score"===o?r.accuracy=e.properties[o]:"_type"===o?"address"===e.properties[o]?r.type="StreetAddress":"poi"===e.properties[o]?r.type="PositionOfInterest":"parcel"!==e.properties[o]&&"cadastral"!==e.properties[o]||(r.type="CadastralParcel"):r.placeAttributes[o]=e.properties[o];"address"===e.properties._type&&(r.matchType=void 0!==e.properties.number&&null!==e.properties.number?"street number":"street")}t.locations.push(r)}ge.prototype={constructor:ge,parse:function(e){var t=new he,r=JSON.parse(e);if("FeatureCollection"===r.type)for(var o=0;o<r.features.length;++o)me(r.features[o],t);else{if("Feature"!==r.type){if("SERVICE_ERROR"===r.type)return{exceptionReport:r};var n=s.getMessage("SERVICE_RESPONSE_ANALYSE",r.type);throw new m({message:n,type:m.TYPE_UNKERR,status:200})}me(r,t)}return t}};var Ee=ge,ye={build:function(e){var t=null;if(e.response){if(e.rawResponse)t=e.response;else{try{if(!(t=(new Ee).parse(e.response)))throw new Error("L'analyse de la réponse du service !?")}catch(t){var r=t.message;return"string"==typeof e.response?r+="('"+e.response+"')":r+="('"+e.response.documentElement.innerHTML+"')",void e.onError.call(e.scope,new m({message:s.getMessage("SERVICE_RESPONSE_ANALYSE",r),type:m.TYPE_UNKERR,status:-1}))}if(t.exceptionReport)return void e.onError.call(e.scope,new m({message:s.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:m.TYPE_SRVERR,status:200}))}e.onSuccess.call(e.scope,t)}else e.onError.call(e.scope,new m({message:s.getMessage("SERVICE_RESPONSE_EMPTY"),type:m.TYPE_SRVERR,status:-1}))}};function ve(e){return ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ve(e)}function we(e){if(!(this instanceof we))throw new TypeError(s.getMessage("CLASS_CONSTRUCTOR","Geocode"));this.CLASSNAME="Geocode",this.logger=n.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]");var t=this.patchOptionConvertor(e);if(t.serverUrl||(t.serverUrl=b.Geocode.newUrl()),v.apply(this,[t]),!t.hasOwnProperty("query"))throw new Error(s.getMessage("PARAM_MISSING","query"));if(this.options.query=t.query,t.index||(this.options.index=t.index="StreetAddress"),t.filters)for(var r=Object.keys(t.filters),o=0;o<r.length;o++){var i=r[o];(void 0===t.filters[i]||"object"===ve(t.filters[i])&&0===Object.keys(t.filters[i]).length||"string"==typeof t.filters[i]&&0===t.filters[i].length||Array.isArray(t.filters[i])&&0===t.filters[i].length)&&delete this.options.filters[i]}this.options.index=t.index||"StreetAddress",this.options.maximumResponses=t.maximumResponses||20}we.prototype=Object.create(v.prototype,{}),we.prototype.constructor=we,we.prototype.patchOptionConvertor=function(e){var t=e;return t.hasOwnProperty("location")&&(this.logger.warn("The parameter 'location' is deprecated"),t.query||(t.query=t.location),delete t.location),t.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),t.filters||(t.filters=t.filterOptions,t.filters.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),t.index||(Array.isArray(t.filters.type)&&t.filters.type.length>0?t.index=t.filters.type[0]:t.index=t.filters.type),delete t.filters.type),t.filters.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),delete t.filters.bbox)),delete t.filterOptions),t.position&&(t.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),t.position.lon||(t.position.lon=t.position.x),delete t.position.x),t.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),t.position.lat||(t.position.lat=t.position.y),delete t.position.y)),t.returnFreeForm&&(this.logger.warn("The parameter 'returnFreeForm' is deprecated"),delete t.returnFreeForm),t.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete t.srs),t},we.prototype.buildRequest=function(e,t){var r={httpMethod:this.options.httpMethod,geocodeMethod:"search",query:this.options.query,index:this.options.index,returnTrueGeometry:this.options.returnTrueGeometry,position:this.options.position,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=ue.build(r),this.request?t.call(this,this.request):e.call(this,new m(s.getMessage("SERVICE_REQUEST_BUILD")))},we.prototype.analyzeResponse=function(e,t){if(this.response){var r={response:this.response,rawResponse:this.options.rawResponse,onError:e,onSuccess:t,scope:this};ye.build(r)}else e.call(this,new m(s.getMessage("SERVICE_RESPONSE_EMPTY")))};var be=we;function Se(e){return Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Se(e)}function Te(e){if(!(this instanceof Te))throw new TypeError(s.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));this.CLASSNAME="ReverseGeocode",this.logger=n.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]");var t=this.patchOptionConvertor(e);if(t.serverUrl||(t.serverUrl=b.ReverseGeocode.newUrl()),v.apply(this,[t]),t.searchGeometry)this.options.searchGeometry=t.searchGeometry;else if(!t.position)throw new Error(s.getMessage("PARAM_MISSING","searchGeometry"));if(t.index||(this.options.index=t.index="StreetAddress"),t.filters)for(var r=Object.keys(t.filters),o=0;o<r.length;o++){var i=r[o];(void 0===t.filters[i]||"object"===Se(t.filters[i])&&0===Object.keys(t.filters[i]).length||"string"==typeof t.filters[i]&&0===t.filters[i].length||Array.isArray(t.filters[i])&&0===t.filters[i].length)&&delete this.options.filters[i]}this.options.position=t.position,this.options.index=t.index||"StreetAddress",this.options.maximumResponses=t.maximumResponses||20}Te.prototype=Object.create(v.prototype,{}),Te.prototype.constructor=Te,Te.prototype.patchOptionConvertor=function(e){var t=e;return t.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),t.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),t.index||(Array.isArray(t.filterOptions.type)&&t.filterOptions.type.length>0?t.index=t.filterOptions.type[0]:t.index=t.filterOptions.type),delete t.filterOptions.type),t.filterOptions.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),t.searchGeometry||(t.searchGeometry=this.bbox2Json(t.filterOptions.bbox)),delete t.filterOptions.bbox),t.filterOptions.circle&&(this.logger.warn("The parameter 'filterOptions.circle' is deprecated"),t.searchGeometry||(t.searchGeometry=this.circle2Json(t.filterOptions.circle)),delete t.filterOptions.circle),t.filterOptions.polygon&&(this.logger.warn("The parameter 'filterOptions.polygon' is deprecated"),t.searchGeometry||(t.searchGeometry=this.polygon2Json(t.filterOptions.polygon)),delete t.filterOptions.polygon),!t.filters&&Object.keys(t.filterOptions).length>0&&(t.filters=t.filterOptions),delete t.filterOptions),t.position&&(t.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),t.position.lon||(t.position.lon=t.position.x),delete t.position.x),t.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),t.position.lat||(t.position.lat=t.position.y),delete t.position.y)),t.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete t.srs),t},Te.prototype.buildRequest=function(e,t){var r={httpMethod:this.options.httpMethod,geocodeMethod:"reverse",searchGeometry:this.options.searchGeometry,index:this.options.index,position:this.options.position,returnTrueGeometry:this.options.returnTrueGeometry,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=ue.build(r),this.request?t.call(this,this.request):e.call(this,new m(s.getMessage("SERVICE_REQUEST_BUILD")))},Te.prototype.analyzeResponse=function(e,t){if(this.response){var r={response:this.response,rawResponse:this.options.rawResponse,onError:e,onSuccess:t,scope:this};ye.build(r)}else e.call(this,new m(s.getMessage("SERVICE_RESPONSE_EMPTY")))},Te.prototype.bbox2Json=function(e){return{type:"Polygon",coordinates:[[[e.left,e.top],[e.right,e.top],[e.right,e.bottom],[e.left,e.bottom],[e.left,e.top]]]}},Te.prototype.circle2Json=function(e){return{type:"Circle",radius:e.radius,coordinates:[e.x,e.y]}},Te.prototype.polygon2Json=function(e){for(var t={type:"Polygon",coordinates:[[]]},r=0;r<e.length;++r)t.coordinates[0].push([e[r].x,e[r].y]);return t},Te.geoEPSG=["EPSG:4326"];var Re=Te;function Ne(){if(!(this instanceof Ne))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}Ne.prototype={constructor:Ne};var _e=Ne;function Oe(){if(!(this instanceof Oe))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}Oe.prototype={constructor:Oe};var Ae=Oe,xe={build:function(e){var t=n.getLogger("AutoCompleteResponseFactory");t.trace(["AutoCompleteResponseFactory::build()"]);var r=null;if(e.response){if(e.rawResponse)t.trace("analyze response : raw"),r=e.response;else{var o=null;if(o="string"==typeof e.response?JSON.parse(e.response):e.response){if(o.error)return void e.onError.call(e.scope,new m({message:s.getMessage("SERVICE_RESPONSE_EXCEPTION",o.error.description),status:o.error.code,type:m.TYPE_SRVERR}));if(r=new _e,!o.results||!Array.isArray(o.results))return void e.onError.call(e.scope,new m(s.getMessage("SERVICE_RESPONSE_FORMAT_3")));for(var i=null,a=0;a<o.results.length;a++){var c=o.results[a];i=new Ae,c&&("StreetAddress"===c.country?(i.street=c.street,i.type="StreetAddress"):"PositionOfInterest"===c.country&&(i.poi=c.street,i.type="PositionOfInterest",i.poiType=c.poiType),i.position&&(i.position.x=c.x,i.position.y=c.y),i.kind=c.kind,i.commune=c.city,i.fullText=c.fulltext,i.postalCode=c.zipcode,i.classification=c.classification),r.suggestedLocations.push(i)}if(!r.suggestedLocations.length)return void e.onError.call(e.scope,new m(s.getMessage("SERVICE_RESPONSE_FORMAT_3")))}if(!r)return void e.onError.call(e.scope,new m({message:s.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:m.TYPE_UNKERR,status:-1}));if(r.exceptionReport)return void e.onError.call(e.scope,new m({message:s.getMessage("SERVICE_RESPONSE_EXCEPTION",r.exceptionReport),type:m.TYPE_SRVERR,status:200}))}e.onSuccess.call(e.scope,r)}else e.onError.call(e.scope,new m(s.getMessage("SERVICE_RESPONSE_EMPTY")))}};function Ce(e){if(!(this instanceof Ce))throw new TypeError(s.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));this.CLASSNAME="AutoComplete",this.logger=n.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]");var t=this.patchOptionConvertor(e);if(t.serverUrl||(t.serverUrl=b.AutoComplete.newUrl()),v.apply(this,arguments),!t.text)throw new Error(s.getMessage("PARAM_MISSING","text"));this.options.text=t.text,t.type||(t.type=["StreetAddress,PositionOfInterest"]),this.options.type=t.type,this.options.territory=t.terr||"",this.options.maximumResponses=t.maximumResponses||10,"XHR"===this.options.protocol&&"POST"===this.options.httpMethod&&(this.logger.warn("Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}Ce.prototype=Object.create(v.prototype,{}),Ce.prototype.constructor=Ce,Ce.prototype.patchOptionConvertor=function(e){var t=e;return t.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),t.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),t.type||(t.type=t.filterOptions.type)),t.filterOptions.territory&&(this.logger.warn("The parameter 'filterOptions.territory' is deprecated"),t.terr||(t.terr=t.filterOptions.territory)),delete t.filterOptions),t},Ce.prototype.buildRequest=function(e,t){var r="";this.options.territory&&(r=this.options.territory);var o="";this.options.type&&(o=this.options.type.join(",")),this.request=a.normalyzeParameters({text:encodeURIComponent(this.options.text),type:o,terr:r,maximumResponses:this.options.maximumResponses}),this.request?t.call(this,this.request):e.call(this,new m(s.getMessage("SERVICE_REQUEST_BUILD")))},Ce.prototype.analyzeResponse=function(e,t){if(this.response){var r={response:this.response,rawResponse:this.options.rawResponse,onSuccess:t,onError:e,scope:this};xe.build(r)}else e.call(this,new m(s.getMessage("SERVICE_RESPONSE_EMPTY")))};var Ie=Ce;function Me(e){if(!(this instanceof Me))throw new TypeError("RouteParamREST constructor cannot be called as a function.");this.logger=n.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=e||{},this.resource=this.options.resource,this.start=this.options.startPoint.x+","+this.options.startPoint.y,this.end=this.options.endPoint.x+","+this.options.endPoint.y,this.intermediates=this.options.viaPoints,this.profile=this.options.graph,this.crs=this.options.srs,this.constraints=this.options.constraints,this.optimization=this.options.routePreference,this.getSteps=this.options.geometryInInstructions?"true":"false",this.distanceUnit=this.options.distanceUnit,this.timeUnit=this.options.timeUnit,this.waysAttributes=this.options.waysAttributes}Me.CLASSNAME="RouteParamREST",Me.prototype={constructor:Me,getIntermediates:function(){var e=[];if(0!==this.intermediates.length)for(var t=0;t<this.intermediates.length;t++){var r=this.intermediates[t];e.push(r.x+","+r.y)}return e.join("|")},getWaysAttributes:function(){return this.waysAttributes.join("|")},getProfile:function(){return this.profile},getDistanceUnit:function(){return"m"===this.distanceUnit?"meter":"km"===this.distanceUnit?"kilometer":""},getOptimization:function(){return this.optimization?this.optimization:""},getConstraints:function(){var e=[];if(0!==this.constraints.length)for(var t=0;t<this.constraints.length;t++)e.push(JSON.stringify(this.constraints[t]));return e.join("|")}},Me.prototype.getParams=function(){var e=[];return e.push({k:"resource",v:this.resource}),e.push({k:"start",v:this.start}),e.push({k:"end",v:this.end}),e.push({k:"geometryFormat",v:"geojson"}),this.optimization&&e.push({k:"optimization",v:this.getOptimization()}),this.intermediates&&e.push({k:"intermediates",v:this.getIntermediates()}),this.profile&&e.push({k:"profile",v:this.getProfile()}),this.constraints&&e.push({k:"constraints",v:this.getConstraints()}),this.crs&&e.push({k:"crs",v:this.crs}),this.distanceUnit&&e.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.timeUnit&&e.push({k:"timeUnit",v:this.timeUnit}),this.waysAttributes&&e.push({k:"waysAttributes",v:this.getWaysAttributes()}),e};var De=Me;function Pe(e){if(this.logger=n.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof Pe))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!e)throw new Error(s.getMessage("PARAM_EMPTY","options"));this.settings=e}Pe.prototype={requestString:null,constructor:Pe,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var e=new De(this.settings).getParams(),t="",r=0;r<e.length;r++){var o=e[r];t&&(t+="&"),t+=o.k+"="+o.v}return this.logger.trace(t),this.requestString=t,this.requestString}};var Le=Pe,ke={build:function(e){n.getLogger("RouteRequestFactory").trace(["RouteRequestFactory::build()"]);var t=e||{},r=!(null===e.onError||"function"!=typeof e.onError),o=null,i=new Le(t);if(!i.processRequestString()){if(o="Error process request (rest) !",r)return void e.onError.call(e.scope,new m(o));throw new Error(o)}return i.requestString}};function qe(){if(!(this instanceof qe))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}qe.prototype={constructor:qe};var Ue=qe;function Fe(){if(!(this instanceof Fe))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}Fe.prototype={constructor:Fe};var Ve=Fe,Ge={build:function(e){var t=n.getLogger("RouteResponseFactory");t.trace("RouteResponseFactory::build()");var r=null;if(e.response){if(e.rawResponse)t.trace("analyze response : raw"),r=e.response;else{var o;if(t.trace("analyze response : json"),o="string"==typeof e.response?JSON.parse(e.response):e.response){if(o.message)return void e.onError.call(e.scope,new m(s.getMessage("SERVICE_RESPONSE_EXCEPTION",o.message)));var i=[],a=[],c=[];if((r=new Ue).hasOwnProperty("totalTime")&&(r.totalTime=parseFloat(o.duration)),r.hasOwnProperty("totalDistance")&&(r.totalDistance=parseFloat(o.distance)),r.hasOwnProperty("bbox")&&(r.bbox.left=parseFloat(o.bbox[0]),r.bbox.bottom=parseFloat(o.bbox[1]),r.bbox.right=parseFloat(o.bbox[2]),r.bbox.top=parseFloat(o.bbox[3])),r.hasOwnProperty("routeGeometry")&&!e.geometryInInstructions&&(r.routeGeometry=o.geometry),r.hasOwnProperty("routeInstructions")&&e.geometryInInstructions){var l,u=o.portions;if(Array.isArray(u)&&u.length)for(l=0;l<u.length;l++)i.push(u[l]);if(i.length)for(l=0;l<i.length;l++)a.push(i[l].steps);if(a.length)for(l=0;l<a.length;l++)c=c.concat(a[l]);c.forEach((function(e){switch(r.routeInstructions.push(new Ve),r.routeInstructions[r.routeInstructions.length-1].duration=e.duration,r.routeInstructions[r.routeInstructions.length-1].distance=e.distance,r.routeInstructions[r.routeInstructions.length-1].code="",r.routeInstructions[r.routeInstructions.length-1].instruction="",r.routeInstructions[r.routeInstructions.length-1].geometry=e.geometry,"Valeur non renseignée"===e.name&&(e.name=""),e.instruction.type){case"turn":r.routeInstructions[r.routeInstructions.length-1].instruction+="Tourner";break;case"new name":r.routeInstructions[r.routeInstructions.length-1].instruction+="Continuer tout droit";break;case"depart":r.routeInstructions[r.routeInstructions.length-1].instruction+="Départ";break;case"arrive":r.routeInstructions[r.routeInstructions.length-1].instruction+="Arrivée";break;case"merge":r.routeInstructions[r.routeInstructions.length-1].instruction+="Rejoindre";break;case"ramp":case"on ramp":r.routeInstructions[r.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"off ramp":r.routeInstructions[r.routeInstructions.length-1].instruction+="Prendre la sortie";break;case"fork":r.routeInstructions[r.routeInstructions.length-1].instruction+="Sur la bifurcation, prendre";break;case"end of road":r.routeInstructions[r.routeInstructions.length-1].instruction+="À la fin de la route, prendre";break;case"use lane":r.routeInstructions[r.routeInstructions.length-1].instruction+="Utiliser la file";break;case"continue":r.routeInstructions[r.routeInstructions.length-1].instruction+="Continuer";break;case"roundabout":case"rotary":r.routeInstructions[r.routeInstructions.length-1].instruction+="Au rond-point";break;case"roundabout turn":r.routeInstructions[r.routeInstructions.length-1].instruction+="Au rond point, tourner";break;case"notification":r.routeInstructions[r.routeInstructions.length-1].instruction+="";break;default:r.routeInstructions[r.routeInstructions.length-1].instruction+="?"+e.instruction.type+"?"}if(e.instruction.modifier)switch(e.instruction.modifier){case"uturn":r.routeInstructions[r.routeInstructions.length-1].instruction="Faire demi-tour";break;case"sharp right":r.routeInstructions[r.routeInstructions.length-1].instruction+=" complètement à droite";break;case"right":r.routeInstructions[r.routeInstructions.length-1].instruction+=" à droite";break;case"slight right":r.routeInstructions[r.routeInstructions.length-1].instruction+=" légèrement à droite";break;case"straight":r.routeInstructions[r.routeInstructions.length-1].instruction="Continuer tout droit";break;case"slight left":r.routeInstructions[r.routeInstructions.length-1].instruction+=" lègèrement à gauche";break;case"left":r.routeInstructions[r.routeInstructions.length-1].instruction+=" à gauche";break;case"sharp left":r.routeInstructions[r.routeInstructions.length-1].instruction+=" complètement à gauche";break;default:r.routeInstructions[r.routeInstructions.length-1].instruction+=" ?"+e.instruction.modifier+"?"}e.instruction.exit&&(r.routeInstructions[r.routeInstructions.length-1].instruction+="".concat(e.instruction.exit,"e sortie")),e.attributes.name&&((e.attributes.name.nom_1_droite||e.attributes.name.toponyme)&&(r.routeInstructions[r.routeInstructions.length-1].instruction+=" sur"),e.attributes.name.nom_1_droite&&(r.routeInstructions[r.routeInstructions.length-1].instruction+=" ".concat(e.attributes.name.nom_1_droite)),e.attributes.name.toponyme&&(r.routeInstructions[r.routeInstructions.length-1].instruction+=" ".concat(e.attributes.name.toponyme)))}))}}if(!r)return void e.onError.call(e.scope,new m(s.getMessage("SERVICE_RESPONSE_ANALYSE","json")));if(r.exceptionReport)return void e.onError.call(e.scope,new m(s.getMessage("SERVICE_RESPONSE_EXCEPTION_2")))}e.onSuccess.call(e.scope,r)}else e.onError.call(e.scope,new m(s.getMessage("SERVICE_RESPONSE_EMPTY")))}};function je(e){if(!(this instanceof je))throw new TypeError(s.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",v.apply(this,arguments),this.logger=n.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!e.startPoint)throw new Error(s.getMessage("PARAM_MISSING","startPoint"));if(null===e.startPoint.x)throw new Error(s.getMessage("PARAM_MISSING","startPoint.x"));if(null===e.startPoint.y)throw new Error(s.getMessage("PARAM_MISSING","startPoint.y"));if(!e.endPoint)throw new Error(s.getMessage("PARAM_MISSING","endPoint"));if(null===e.endPoint.x)throw new Error(s.getMessage("PARAM_MISSING","endPoint.x"));if(null===e.endPoint.y)throw new Error(s.getMessage("PARAM_MISSING","endPoint.y"));if(e.outputFormat&&"json"!==e.outputFormat&&this.logger.warn("options.outputFormat could only be json"),this.options.outputFormat="json",this.options.resource=e.resource||"bdtopo-osrm",this.options.startPoint=e.startPoint,this.options.endPoint=e.endPoint,this.options.viaPoints=e.viaPoints||[],this.options.routePreference=e.routePreference||"fastest",e.graph?("Voiture"===e.graph&&(this.options.graph="car"),"Pieton"===e.graph&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],e.constraints){if(!Array.isArray(e.constraints))throw new Error(s.getMessage("PARAM_TYPE","constraints"));for(var t=0;t<e.constraints.length;t++)this.options.constraints.push(e.constraints[t])}var r={},o={},i={};if(e.exclusions&&0!==e.exclusions.length){this.logger.warn("options.exclusions is DEPRECATED !!");for(var a=0;a<e.exclusions.length;a++)"string"==typeof e.exclusions[a]&&(e.exclusions[a]=e.exclusions[a].toLowerCase(),"toll"===e.exclusions[a]&&(i.constraintType="banned",i.key="wayType",i.operator="=",i.value="autoroute",this.options.constraints.push(i)),"tunnel"===e.exclusions[a]&&(r.constraintType="banned",r.key="wayType",r.operator="=",r.value="tunnel",this.options.constraints.push(r)),"bridge"===e.exclusions[a]&&(o.constraintType="banned",o.key="wayType",o.operator="=",o.value="pont",this.options.constraints.push(o)))}if(this.options.geometryInInstructions=e.geometryInInstructions||!1,this.options.provideBbox=e.provideBbox||!0,this.options.distanceUnit=e.distanceUnit||"m",this.options.timeUnit=e.timeUnit||"second",this.options.expectedStartTime=null,this.options.srs=e.srs||"EPSG:4326",this.options.waysAttributes=e.waysAttributes||[],!this.options.serverUrl){var c=b.Route.newUrl();if(!c)throw new Error("Url by default not found !");this.options.serverUrl=c,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}je.prototype=Object.create(v.prototype,{}),je.prototype.constructor=je,je.prototype.buildRequest=function(e,t){var r={resource:this.options.resource,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,constraints:this.options.constraints,distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs,waysAttributes:this.options.waysAttributes};this.request=ke.build(r),this.request?t.call(this,this.request):e.call(this,new m(s.getMessage("SERVICE_REQUEST_BUILD")))},je.prototype.analyzeResponse=function(e,t){if(this.response){var r={distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:e,onSuccess:t,scope:this,geometryInInstructions:this.options.geometryInInstructions};Ge.build(r)}else e.call(this,new m(s.getMessage("SERVICE_RESPONSE_EMPTY")))};var He=je;function Ye(e){if(!(this instanceof Ye))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");this.logger=n.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=e||{},this.id=this.options.id,this.resource=this.options.resource,this.point=this.options.position,this.crs=this.options.srs,this.profile=this.options.graph,this.constraints=this.options.constraints,this.reverse=this.options.reverse,this.timeUnit=this.options.timeUnit,this.distanceUnit=this.options.distanceUnit,"distance"===this.options.method?(this.costType="distance",this.costValue=this.options.distance,"m"===this.distanceUnit&&this.costValue>=5e4&&(this.distanceUnit="km",this.costValue/=1e3)):(this.costType="time",this.costValue=this.options.time)}Ye.CLASSNAME="ProcessIsoCurveParam",Ye.prototype={constructor:Ye,getLocation:function(){return this.point.x+","+this.point.y},getDistanceUnit:function(){return"m"===this.distanceUnit?"meter":"km"===this.distanceUnit?"kilometer":""},getConstraints:function(){var e=[];if(0!==this.constraints.length)for(var t=0;t<this.constraints.length;t++)e.push(JSON.stringify(this.constraints[t]));return e.join("|")},getDirection:function(){return this.reverse?"arrival":"departure"}},Ye.prototype.getParams=function(){var e=[];return e.push({k:"resource",v:this.resource}),e.push({k:"point",v:this.getLocation()}),e.push({k:"direction",v:this.getDirection()}),e.push({k:"costType",v:this.costType}),e.push({k:"costValue",v:this.costValue}),e.push({k:"profile",v:this.profile}),e.push({k:"timeUnit",v:this.timeUnit}),e.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.crs&&e.push({k:"crs",v:this.crs}),this.constraints&&e.push({k:"constraints",v:this.getConstraints()}),e};var Xe=Ye;function ze(e){if(this.logger=n.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof ze))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!e)throw new Error(s.getMessage("PARAM_EMPTY","options"));this.settings=e,this.mode=this.settings.httpMethod||"GET"}ze.prototype={requestString:null,constructor:ze,processRequestString:function(){var e="",t=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var r=new Xe(this.settings).getParams();for(t=0;t<r.length;t++){var o=r[t];e&&(e+="&"),e+=o.k+"="+o.v}break;case"POST":this.logger.trace("Process POST Request");var n={};n.resource=this.settings.resource,n.point=this.settings.position.x+","+this.settings.position.y,"distance"===this.settings.method?(n.costType="distance",n.costValue=this.settings.distance):(n.costType="time",n.costValue=this.settings.time),n.profile=this.settings.graph,this.settings.reverse?n.direction="arrival":n.direction="departure",n.constraints=this.settings.constraints,n.distanceUnit=this.settings.distanceUnit,n.timeUnit=this.settings.timeUnit,n.crs=this.settings.srs,e=JSON.stringify(n);break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(e),this.requestString=e,this.requestString}};var Be=ze;function We(){if(!(this instanceof We))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}We.prototype={constructor:We};var Je=We,Qe={build:function(e){var t=n.getLogger("ProcessIsoCurveResponseFactory");t.trace(["ProcessIsoCurveResponseFactory::build()"]);var r=null;if(e.response){if(e.rawResponse)t.trace("analyze response : raw"),r=e.response;else{var o;if(t.trace("analyze response : json"),o="string"==typeof e.response?JSON.parse(e.response):e.response,r=new Je,!o)return void e.onError.call(e.scope,new m(s.getMessage("SERVICE_RESPONSE_ANALYSE",e.response)));"distance"===o.costType?(r.time="",r.distance=o.costValue):(r.time=o.costValue,r.distance=""),r.message="",r.id="",r.srs=o.crs,r.geometry=o.geometry;var i=o.point.split(",");if(r.location&&(r.location.x=i[0],r.location.y=i[1]),r.exceptionReport)return void e.onError.call(e.scope,new m({message:s.getMessage("SERVICE_RESPONSE_EXCEPTION",r.exceptionReport),type:m.TYPE_SRVERR,status:200}))}e.onSuccess.call(e.scope,r)}else e.onError.call(e.scope,new m(s.getMessage("SERVICE_RESPONSE_EMPTY")))}};function Ke(e){if(!(this instanceof Ke))throw new TypeError(s.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",v.apply(this,arguments),this.logger=n.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!e.position)throw new Error(s.getMessage("PARAM_MISSING","position"));if(null===e.position.x)throw new Error(s.getMessage("PARAM_MISSING","position.x"));if(null===e.position.y)throw new Error(s.getMessage("PARAM_MISSING","position.y"));if(!e.time&&!e.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!e.time&&e.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),e.time&&!e.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.resource=e.resource||"bdtopo-valhalla",this.options.exclusions=e.exclusions||[],this.options.reverse=e.reverse||!1,this.options.srs=e.srs||"EPSG:4326",this.options.distanceUnit=e.distanceUnit||"m",this.options.timeUnit=e.timeUnit||"second",e.smoothing&&this.logger.warn("options.smoothing is DEPRECATED"),this.options.smoothing=!1,e.holes&&this.logger.warn("options.holes is DEPRECATED"),this.options.holes=!1,e.graph?("Voiture"===e.graph&&(this.options.graph="car"),"Pieton"===e.graph&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],e.constraints){if(!Array.isArray(e.constraints))throw new Error(s.getMessage("PARAM_TYPE","constraints"));for(var t=0;t<e.constraints.length;t++)this.options.constraints.push(e.constraints[t])}var r={},o={},i={};if(e.exclusions&&0!==e.exclusions.length){this.logger.warn("options.exclusions is DEPRECATED !!");for(var a=0;a<e.exclusions.length;a++)"string"==typeof e.exclusions[a]&&(e.exclusions[a]=e.exclusions[a].toLowerCase(),"toll"===e.exclusions[a]&&(i.constraintType="banned",i.key="wayType",i.operator="=",i.value="autoroute",this.options.constraints.push(i)),"tunnel"===e.exclusions[a]&&(r.constraintType="banned",r.key="wayType",r.operator="=",r.value="tunnel",this.options.constraints.push(r)),"bridge"===e.exclusions[a]&&(o.constraintType="banned",o.key="wayType",o.operator="=",o.value="pont",this.options.constraints.push(o)))}if(this.options.outputFormat="string"==typeof e.outputFormat?e.outputFormat.toLowerCase():"json",e.outputFormat&&"json"!==e.outputFormat)throw new Error(s.getMessage("PARAM_NOT_SUPPORT","outputFormat"));if(this.options.outputFormat="json",!this.options.serverUrl){var c=b.ProcessIsoCurve.newUrl();if(!c)throw new Error("Url by default not found !");this.options.serverUrl=c,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}Ke.prototype=Object.create(v.prototype,{}),Ke.prototype.constructor=Ke,Ke.prototype.buildRequest=function(e,t){try{var r=new Be(this.options);if(!r.processRequestString())throw new Error(s.getMessage("SERVICE_REQUEST_BUILD"));this.request=r.requestString}catch(t){return void e.call(this,new m(t.message))}t.call(this,this.request)},Ke.prototype.analyzeResponse=function(e,t){if(this.response){var r={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:t,onError:e,scope:this};Qe.build(r)}else e.call(this,new m(s.getMessage("SERVICE_RESPONSE_EMPTY")))};var Ze=Ke,$e={getConfig:function(e){new I(e).call()},getAltitude:function(e){new ie(e).call()},geocode:function(e){new be(e).call()},reverseGeocode:function(e){new Re(e).call()},autoComplete:function(e){new Ie(e).call()},route:function(e){new He(e).call()},isoCurve:function(e){new Ze(e).call()}},et=E.version,tt=E.date,rt={};rt.servicesVersion=et,rt.servicesDate=tt,rt.Protocols={},rt.Protocols.XHR=h,rt.Services=$e,rt.Services.DefaultUrl=b,rt.Services.AltiResponse=J,rt.Services.Alti={},rt.Services.Alti.Elevation=K,rt.Services.AutoCompleteResponse=_e,rt.Services.AutoComplete={},rt.Services.AutoComplete.SuggestedLocation=Ae,rt.Services.Config=I,rt.Services.IsoCurveResponse=Je,rt.Services.RouteResponse=Ue,rt.Services.Route={},rt.Services.Route.RouteInstruction=Ve,rt.Error=m,rt.Helper=a;t.default=rt}]).default}));